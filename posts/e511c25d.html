<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Linux笔记 | 蓝桉`Blog</title><meta name="author" content="蓝桉,kt_zxh@163.com"><meta name="copyright" content="蓝桉"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="概述Linux是一种自由和开放源码的类UNIX操作系统。该操作系统的内核由林纳斯·托瓦兹在1991年10月5日首次发布在加上用户空间的应用程序之后，成为Linux操作系统。 安装与下载VMware虚拟机下载安装Linux(CentOS7)系统虚拟机linux系统下载 目录结构Linux 的一切资源都挂载在 &#x2F; 节点下。&#x2F;bin： Binary的缩写。存放系统命令，普通用户和 root 都可以执行。">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux笔记">
<meta property="og:url" content="https://ktzxy.github.io/posts/e511c25d.html">
<meta property="og:site_name" content="蓝桉&#96;Blog">
<meta property="og:description" content="概述Linux是一种自由和开放源码的类UNIX操作系统。该操作系统的内核由林纳斯·托瓦兹在1991年10月5日首次发布在加上用户空间的应用程序之后，成为Linux操作系统。 安装与下载VMware虚拟机下载安装Linux(CentOS7)系统虚拟机linux系统下载 目录结构Linux 的一切资源都挂载在 &#x2F; 节点下。&#x2F;bin： Binary的缩写。存放系统命令，普通用户和 root 都可以执行。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ktzxy.github.io/bg/Image00010.webp">
<meta property="article:published_time" content="2024-05-16T13:28:13.000Z">
<meta property="article:modified_time" content="2025-07-13T15:45:18.447Z">
<meta property="article:author" content="蓝桉">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ktzxy.github.io/bg/Image00010.webp"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Linux笔记",
  "url": "https://ktzxy.github.io/posts/e511c25d.html",
  "image": "https://ktzxy.github.io/bg/Image00010.webp",
  "datePublished": "2024-05-16T13:28:13.000Z",
  "dateModified": "2025-07-13T15:45:18.447Z",
  "author": [
    {
      "@type": "Person",
      "name": "蓝桉",
      "url": "https://ktzxy.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://ktzxy.github.io/posts/e511c25d.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux笔记',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_4379924_273fk05h86zi.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/progress_bar/progress_bar.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/windmill/windmill.css"><link rel="stylesheet" href="/css/cat.css"><link rel="stylesheet" href="/css/meting/music_lanan.css"><div id="myscoll"></div><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css" /><link rel="stylesheet" href="/css/runtime/runtime.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="蓝桉`Blog" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load', preloader.endLoading)

  if (false) {
    btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  }
})()</script><div id="web_bg" style="background-image: url(/img/bg.webp);"></div><div id="an_music_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/avatar.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">264</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">38</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">37</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><i class="fa-fw icon-zhuye-"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-zhuye-"></use></svg><span> 首页</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><i class="fa-fw icon-shijianzhou"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-shijianzhou"></use></svg><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/essay/"><i class="fa-fw icon-xiaoxi"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xiaoxi"></use></svg><span> 闲言碎语</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/music/"><i class="fa-fw icon-music"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-music"></use></svg><span> 音乐馆</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/categories/"><i class="fa-fw icon-fenlei"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fenlei"></use></svg><span> 分类</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/fcircle/"><i class="fa-fw icon-pengyouquan"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-pengyouquan"></use></svg><span> 朋友圈</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/comments/"><i class="fa-fw icon-xinfeng"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xinfeng"></use></svg><span> 留言板</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/link/"><i class="fa-fw icon-lianjie"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-lianjie"></use></svg><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:randomPost();"><i class="fa-fw icon-wodezhuifan"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-wodezhuifan"></use></svg><span> 随机访问</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><i class="fa-fw icon-guanyuwomen2"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-guanyuwomen2"></use></svg><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/bg/Image00010.webp);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">蓝桉`Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">Linux笔记</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><i class="fa-fw icon-zhuye-"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-zhuye-"></use></svg><span> 首页</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><i class="fa-fw icon-shijianzhou"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-shijianzhou"></use></svg><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/essay/"><i class="fa-fw icon-xiaoxi"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xiaoxi"></use></svg><span> 闲言碎语</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/music/"><i class="fa-fw icon-music"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-music"></use></svg><span> 音乐馆</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/categories/"><i class="fa-fw icon-fenlei"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fenlei"></use></svg><span> 分类</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/fcircle/"><i class="fa-fw icon-pengyouquan"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-pengyouquan"></use></svg><span> 朋友圈</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/comments/"><i class="fa-fw icon-xinfeng"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xinfeng"></use></svg><span> 留言板</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/link/"><i class="fa-fw icon-lianjie"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-lianjie"></use></svg><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:randomPost();"><i class="fa-fw icon-wodezhuifan"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-wodezhuifan"></use></svg><span> 随机访问</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><i class="fa-fw icon-guanyuwomen2"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-guanyuwomen2"></use></svg><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Linux笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-05-16T13:28:13.000Z" title="发表于 2024-05-16 13:28:13">2024-05-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-07-13T15:45:18.447Z" title="更新于 2025-07-13 15:45:18">2025-07-13</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>Linux是一种自由和开放源码的类UNIX操作系统。该操作系统的内核由林纳斯·托瓦兹在1991年10月5日首次发布在加上用户空间的应用程序之后，成为Linux操作系统。</p>
<h1 id="安装与下载"><a href="#安装与下载" class="headerlink" title="安装与下载"></a>安装与下载</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/da_ge_de_nv_ren/article/details/128408962">VMware虚拟机下载安装Linux(CentOS7)系统<em>虚拟机linux系统下载</em></a></p>
<h1 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h1><p>Linux 的一切资源都挂载在 / 节点下。<br>/bin： Binary的缩写。存放系统命令，普通用户和 root 都可以执行。放在 /bin 下的命令在单用户模式下也可以执行。<br>/boot： 这里存放的是启动 Linux 时使用的一些核心文件，包括一些连接文件以及镜像文件。<br>/dev： Device的缩写。该目录下存放的是 Linux 的外部设备，在 Linux 中访问设备的方式和访问文件的方式是相同的。<br>/etc： Etcetera的缩写。这个目录用来存放所有的系统管理所需要的配置文件和子目录。<br>/home： 用户的主目录，在 Linux 中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的。<br>/lib： Library的缩写。这个目录里存放着系统最基本的动态连接共享库，其作用类似于 Windows 里的 DLL 文件。几乎所有的应用程序都需要用到这些共享库。<br>/lib64： 64位相关的库会放在这。<br>/media： linux 系统会自动识别一些设备，例如U盘、光驱等等，当识别后，Linux 会把识别的设备挂载到这个目录下。<br>/mnt： 系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将光驱挂载在 /mnt/ 上，然后进入该目录就可以查看光驱里的内容了。<br>/opt： optional的缩写。这是给主机额外安装软件所摆放的目录。<br>/proc： Processes的缩写。/proc 是一种伪文件系统（也即虚拟文件系统），存储的是当前内核运行状态的一系列特殊文件，这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。这个目录的内容不在硬盘上而是在内存里<br>/root： 该目录为系统管理员，也称作超级权限者的用户主目录。<br>/run： 运行目录<br>/sbin： s 就是 Super User 的意思，是 Superuser Binaries (超级用户的二进制文件) 的缩写，这里存放的是系统管理员使用的系统管理程序。<br>/srv： 该目录存放一些服务启动之后需要提取的数据。<br>/sys： 虚拟文件系统。和 /proc/ 目录相似，该目录中的数据都保存在内存中，主要保存与内核相关的信息<br>/tmp： temporary的缩写这个目录是用来存放一些临时文件的。<br>/usr： unix system resources缩写。用于存储系统软件资源。<br>/var： 用于存储动态数据，例如缓存、日志文件、软件运行过程中产生的文件等</p>
<h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><p><a target="_blank" rel="noopener" href="https://www.linuxcool.com/">Linux命令大全(手册) – 真正好用的Linux命令在线查询网站 (linuxcool.com)</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"># 查看cpu信息</span><br><span class="line">lscpu</span><br><span class="line"># 查看内存大小</span><br><span class="line">free</span><br><span class="line"># 查看硬盘和分区情况</span><br><span class="line">lsblk</span><br><span class="line"># 查看内核版本</span><br><span class="line">uname -r</span><br><span class="line"># 查看操作系统发行版本</span><br><span class="line">cat /etc/redhat-release </span><br><span class="line">cat /etc/os-release </span><br><span class="line"># 显示日历</span><br><span class="line">cal –y </span><br><span class="line"># 关机</span><br><span class="line">halt</span><br><span class="line">poweroff</span><br><span class="line"># 重启</span><br><span class="line">reboot</span><br><span class="line"># 用户登录信息查看命令</span><br><span class="line">whoami: 显示当前登录有效用户</span><br><span class="line">who: 系统当前所有的登录会话</span><br><span class="line">w: 系统当前所有的登录会话及所做的操作</span><br><span class="line"># 显示当前工作目录</span><br><span class="line">pwd</span><br><span class="line"># 列出当前目录的内容或指定目录</span><br><span class="line">ls</span><br><span class="line">	常用选项</span><br><span class="line">	-a 包含隐藏文件</span><br><span class="line">    -l 显示额外的信息</span><br><span class="line">    -R 目录递归</span><br><span class="line">    -ld 目录和符号链接信息</span><br><span class="line">    -1 文件分行显示</span><br><span class="line">    -S 按从大到小排序</span><br><span class="line">    -t 按mtime排序</span><br><span class="line">    -u 配合-t选项，显示并按atime从新到旧排序</span><br><span class="line">    -U 按目录存放顺序显示</span><br><span class="line">    -X 按文件后缀排序</span><br></pre></td></tr></table></figure>
<h1 id="路径"><a href="#路径" class="headerlink" title="路径"></a>路径</h1><ul>
<li>绝对路径<br>以正斜杠/ 即根目录开始<br>完整的文件的位置路径<br>可用于任何想指定一个文件名的时候</li>
<li>相对路径名<br>不以斜线开始<br>一般情况下，是指相对于当前工作目录的路径，特殊场景下，是相对于某目录的位置<br>可以作为一个简短的形式指定一个文件名</li>
</ul>
<h1 id="学习网址"><a href="#学习网址" class="headerlink" title="学习网址"></a>学习网址</h1><p><a target="_blank" rel="noopener" href="http://www.yunweipai.com/">http://www.yunweipai.com/</a></p>
<h1 id="文件管理"><a href="#文件管理" class="headerlink" title="文件管理"></a>文件管理</h1><h2 id="创建文件"><a href="#创建文件" class="headerlink" title="创建文件"></a>创建文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch 文件名</span><br></pre></td></tr></table></figure>
<h2 id="创建目录"><a href="#创建目录" class="headerlink" title="创建目录"></a>创建目录</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir 路径和目录名</span><br></pre></td></tr></table></figure>
<h2 id="复制"><a href="#复制" class="headerlink" title="复制"></a>复制</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp 源文件路径 目标文件夹</span><br></pre></td></tr></table></figure>
<h2 id="移动"><a href="#移动" class="headerlink" title="移动"></a>移动</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv 源文件路径 目标文件路径</span><br></pre></td></tr></table></figure>
<h2 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf 文件或目录的路径</span><br></pre></td></tr></table></figure>
<h2 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cat全部</span><br><span class="line">more翻页</span><br><span class="line">head头部</span><br><span class="line">tail尾部</span><br><span class="line">grep过滤关键字</span><br><span class="line">语法：grep 关键字   文件名</span><br><span class="line"># grep &#x27;abc&#x27; /root/file1.txt</span><br></pre></td></tr></table></figure>
<h2 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h2><p>图像文件编辑器 gedit</p>
<p>文本编辑器 vi vim</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"># 光标定位 </span><br><span class="line">hjkL              //上下左右</span><br><span class="line">0 $               //行首行尾</span><br><span class="line">gg G 			//页首页尾</span><br><span class="line">3G 进入第三行  </span><br><span class="line">/string (n N 可以循环的)     //查找字符，按n键选下一个（重要）</span><br><span class="line"></span><br><span class="line">#文本编辑</span><br><span class="line">文本编辑</span><br><span class="line">yy 复制</span><br><span class="line">dd 删除</span><br><span class="line">p 粘贴</span><br><span class="line">u undo撤销</span><br><span class="line"></span><br><span class="line"># 进入其他模式</span><br><span class="line">进入其它模式</span><br><span class="line">a 进入插入模式</span><br><span class="line">i 进入插入模式</span><br><span class="line">o 进入插入模式</span><br><span class="line">A 进入插入模式</span><br><span class="line"></span><br><span class="line">: 进入末行模式（扩展命令模式）</span><br><span class="line">v 进入可视模式</span><br><span class="line">ESC 返回命令模式</span><br><span class="line"></span><br><span class="line"># 扩展命令模式</span><br><span class="line">保存退出</span><br><span class="line"></span><br><span class="line">:w 保存 </span><br><span class="line">:q 退出 </span><br><span class="line">:wq 保存并退出 </span><br><span class="line">查找替换</span><br><span class="line"></span><br><span class="line">:范围 s/原内容/新内容/全局 </span><br><span class="line">:1,5 s/root/qianfeng/g          从1－5行的root 替换为qianfeng </span><br><span class="line">另存为</span><br><span class="line"></span><br><span class="line">:w file9.txt 另存为 file9.txt</span><br><span class="line">:set nu 设置行号 </span><br><span class="line">:set nonu 取消设置行号 </span><br><span class="line"></span><br><span class="line">:set list 显示控制字符</span><br></pre></td></tr></table></figure>
<h2 id="文件类型"><a href="#文件类型" class="headerlink" title="文件类型"></a>文件类型</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- 普通文件（文本文件，二进制文件，压缩文件，电影，图片。。。）</span><br><span class="line">d 目录文件（蓝色）</span><br><span class="line">b 设备文件（块设备）存储设备硬盘，U盘 /dev/sda, /dev/sda1</span><br><span class="line">c 设备文件（字符设备）打印机，终端 /dev/tty1</span><br><span class="line">l 链接文件（淡蓝色）</span><br><span class="line">s 套接字文件</span><br><span class="line">p 管道文件</span><br></pre></td></tr></table></figure>
<h1 id="用户与用户组"><a href="#用户与用户组" class="headerlink" title="用户与用户组"></a>用户与用户组</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# head -1 /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">用户名：x：uid：gid：描述：HOME：shell</span><br><span class="line"></span><br><span class="line">系统约定：RHEL7</span><br><span class="line">uid：0 特权用户</span><br><span class="line">uid：1~499 系统用户</span><br><span class="line">uid：1000+ 普通用户</span><br><span class="line"></span><br><span class="line">用户基本信息文件	/etc/passwd</span><br><span class="line">用户密码信息文件	/etc/shadow</span><br><span class="line">组信息文件		  /etc/group</span><br></pre></td></tr></table></figure>
<h2 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h2><p>1、创建用户 <code>useradd [选项] 用户名</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">选项：</span><br><span class="line">    -d	指定用户登录时的目录</span><br><span class="line">    -e	指定用户的有效期限</span><br><span class="line">    -f	缓冲天数，密码过期时在指定天数后关闭该账号</span><br><span class="line">    -g	指定用户所属组</span><br><span class="line">    -G	指定用户的附加组</span><br><span class="line">    -m	自动创建用户的登录目录</span><br><span class="line">    -r	创建系统账号</span><br><span class="line">    -s	指定用户的登录shell</span><br><span class="line">    -u	指定用户的用户ID</span><br></pre></td></tr></table></figure>
<p>2、查看用户的属性信息<code>cat /etc/passwd</code></p>
<p>3、设置用户密码 <code>passwd [选项] 用户名</code></p>
<p>修改密码也使用同样的语法格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">选项：</span><br><span class="line">-l	锁定密码，锁定后密码失效，无法登录</span><br><span class="line">-d	删除密码，仅系统管理员可用</span><br><span class="line">-S	列出密码的相关信息，仅管理员可使用</span><br><span class="line">-f	强制执行</span><br></pre></td></tr></table></figure>
<p>查看用户的密码信息（已加密）<code>cat /etc/shadow</code></p>
<p>4、删除用户 <code>userdel [选项] 用户名</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-f	强制删除，即使是当前用户</span><br><span class="line">-r	删除用户的同时，删除与用户相关的所有文件</span><br></pre></td></tr></table></figure>
<p>5、修改用户信息 <code>usermod [选项] 参数</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">usermod命令用与修改用户属性信息，包括用户ID、主目录、用户组、账号有效信息</span><br><span class="line">使用usermod命令时，必须先明确该用户没有在电脑上执行任何程序</span><br><span class="line">-d	修改用户的的登录目录</span><br><span class="line">-e	修改账号的有效期限</span><br><span class="line">-f	修改缓冲天数</span><br><span class="line">-g	修改指定用户所属组</span><br><span class="line">-G	修改指定用户的附加组</span><br><span class="line">-l	修改用户账号名称</span><br><span class="line">-L	锁定密码，锁定后密码失效，无法登录</span><br><span class="line">-U	解除密码锁定</span><br><span class="line">-s	修改指定用户的登录shell</span><br><span class="line">-u	修改指定用户的用户ID</span><br><span class="line"></span><br><span class="line">用法：</span><br><span class="line"># usermod -u 678 user1</span><br></pre></td></tr></table></figure>
<h2 id="用户组管理"><a href="#用户组管理" class="headerlink" title="用户组管理"></a>用户组管理</h2><p>1、新增用户 <code>groupadd [选项] 参数</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-g	指定新建用户组的组ID</span><br><span class="line">-r	创建系统用户组，组ID的取值范围为1~499</span><br><span class="line">-o	允许创建组ID已存在的用户</span><br><span class="line"></span><br><span class="line">用法：</span><br><span class="line"># groupadd -g 550 group1</span><br></pre></td></tr></table></figure>
<p>Linux系统将用户组信息储存在<code>/etc/group</code>文件中，新用户组创建成功后，该文件将多一条与该用户组相关的记录。</p>
<p>2、删除用户组 <code>groupdel 组名</code></p>
<p>3、修改用户组属性 <code>groupmod [选项] 参数</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">选项：</span><br><span class="line">-g	为用户组指定新的组ID</span><br><span class="line">-n	修改用户组的组名</span><br><span class="line">-o	允许用户创建组ID已存在的用户组</span><br><span class="line"></span><br><span class="line">用法：</span><br><span class="line"># groupmod -n &lt;旧组名&gt; &lt;新组名&gt;</span><br><span class="line"># groupmod -o &lt;组名&gt; -g &lt;已经存在的组ID&gt;</span><br></pre></td></tr></table></figure>
<p>4、用户组切换 <code>newgrp 用户组</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">用户组分为基本组和附加组，将用户添加附加组后，用户可拥有对应组的权限。用户的基本组唯一，但附加组可以不唯一。用户可从附加组中移除，但不能从基本组中移除。</span><br></pre></td></tr></table></figure>
<p>5、用户组管理</p>
<p>gpasswd命令用于管理用户组 <code>gpasswd [选项] 参数</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-a	添加用户到用户组</span><br><span class="line">-d	从用户组中删除用户</span><br><span class="line">-r	删除密码</span><br><span class="line">-R	限制用户登入组，只有组中的成员才可以用newgrp加入用户组</span><br><span class="line"></span><br><span class="line">用法：</span><br><span class="line"># gpasswd -a user1 group1	将用户user1添加到group1</span><br></pre></td></tr></table></figure>
<h2 id="用户切换"><a href="#用户切换" class="headerlink" title="用户切换"></a>用户切换</h2><p>1、使用su命令切换用户，可以任意用户切换 <code>su [选项] 用户名</code></p>
<p>若选项和用户名缺省（默认），则表示切换到root用户，但此时保留原来用户的工作环境，若使用“su -”，则表示从当前用户切换到root用户，并切换到root用户的工作目录。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">选项：</span><br><span class="line">-c	执行完指定的指令后，切换到原来的用户</span><br><span class="line">-l	切换用户的同时，切换到对应用户的工作目录，环境变量也会随之改变。</span><br><span class="line">-m,-p	切换用户，不改变环境目录</span><br><span class="line">-s	指定要执行的shell</span><br></pre></td></tr></table></figure>
<p>2、sudo命令的格式<code>sudo [选项] [参数]</code></p>
<p>sudo可使当前用户以其他身份来执行命令，若不指定用户名，则默认以root身份执行。在使用sudo命令时，用户需要输入自己的密码，密码验证在之后的5分钟内有效，若超过则需要重新验证。</p>
<p>使用sudo命令之前，需要先在etc目录下的sudoers文件中对可执行sudo指令的用户进行设置。sudoers文件内容须遵循语法规范，visudo命令可防止其他用户同时修改sudoers文件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># visudo</span><br><span class="line">## Allow root to run any commands anywhere</span><br><span class="line">root    ALL=(ALL)       ALL</span><br><span class="line"># 第二条语句是对root用户权限设置，作用：使root用户能够在任何情景下执行任何命令，</span><br><span class="line">格式：</span><br><span class="line">账户名	主机名称=(可切换的身份)	可用的命令</span><br><span class="line"></span><br><span class="line">说明：</span><br><span class="line">账户名：只有账户名被写入sudoers文件时，该用户才能使用sudo命令</span><br><span class="line">主机名称：该参数决定此条语句中账户名对应的用户可以从哪些网络主机连接当前Linux主机，root用户默认可以			来自任何一台网络主机。</span><br><span class="line">可用的命令：该参数指数此条语句中的用户可以执行哪些命令。注意，命令的路径为绝对路径。</span><br><span class="line"></span><br><span class="line">以上的语句ALL分别代表任何主机，任何身份和任何命令。以用户user1为例，若要使用户user1能以root用户执行/bin/more命令，则应在sudoers文件中添加如下内容。</span><br><span class="line">user1	ALL=(root)	/bin/more</span><br><span class="line">保存退出后，切换到用户user1，使用命令`sudo -l`可查看该用户可以使用的命令。</span><br></pre></td></tr></table></figure>
<p>当需要操作的用户较多时，如此操作显然相对麻烦，Linux系统支持为用户组内的整组用户统一设置权限。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">## Allows people in group wheel to run all commands</span><br><span class="line">%wheel  ALL=(ALL)       ALL</span><br><span class="line">&quot;%&quot;声明之后的字符串是一个用户组，该语句表示任何加入用户组wheel的用户，都能通过任意主机连接、任何身份执行全部命令。若想提升某些用户的权限为ALL，将它们添加到用户组wheel即可。</span><br><span class="line"></span><br><span class="line">例子</span><br><span class="line">%group1 ALL=(root)	/bin/more</span><br><span class="line">禁用</span><br><span class="line">%group1 ALL=(root)	!/bin/more</span><br></pre></td></tr></table></figure>
<h1 id="用户的权限"><a href="#用户的权限" class="headerlink" title="用户的权限"></a>用户的权限</h1><h2 id="基本权限UGO"><a href="#基本权限UGO" class="headerlink" title="基本权限UGO"></a>基本权限UGO</h2><div class="table-container">
<table>
<thead>
<tr>
<th>权限</th>
<th>对应字符</th>
<th>文件</th>
<th>目录</th>
</tr>
</thead>
<tbody>
<tr>
<td>读</td>
<td>r 4</td>
<td>可查看文件内容</td>
<td>可以列出目录中的内容</td>
</tr>
<tr>
<td>写</td>
<td>w 2</td>
<td>可修改文件内容</td>
<td>可以在目录中创建、删除文件</td>
</tr>
<tr>
<td>执行</td>
<td>x 1</td>
<td>可执行该文件</td>
<td>可以进入目录</td>
</tr>
</tbody>
</table>
</div>
<p>常用的权限管理命令有chmod、chown、chgrp等，默认情况下，普通用户不能使用权限。</p>
<p>设置权限：</p>
<p>1、chmod更改权限，其功能为变更文件或目录权限（使用字符，使用数字）<br>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">chmod 	对象(u/g/o)赋值符(+/-/=)权限类型(rwx) 	文件/目录</span><br><span class="line">选项:</span><br><span class="line">-f	不显示错误信息</span><br><span class="line">-v	显示指令执行过程</span><br><span class="line">-R	递归处理，处理指定目录及其中所有的文件与子目录</span><br></pre></td></tr></table></figure>
<p>2、chown其功能为更改文件或目录的所有者。默认情况下文件的所有者为创建该文件的用户，或在文件被创建时通过命令指定用户，需要时可使用chown对文件的所有者进行修改。</p>
<p>命令格式 <code>chown [选项] [用户] [文件或目录]</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">选项:</span><br><span class="line">-f	不显示错误信息</span><br><span class="line">-v	显示指令执行过程</span><br><span class="line">-R	递归处理，处理指定目录及其中所有的文件与子目录</span><br><span class="line"></span><br><span class="line">chown:设置文件属于谁，属组</span><br><span class="line">	语法：	chown	用户名.组名	文件</span><br><span class="line">					chown	user01.hr	/tmp/file1 </span><br></pre></td></tr></table></figure>
<p>3、chgrp用于更改文件或目录的所属组，一般情况下，文件或目录与创建该文件的用户属于同一组，或在被创建时通过选项指定所属组，但在需要时，可通过chgrp命令更改文件的所属组。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># chgrp 组名 文件或目录</span><br></pre></td></tr></table></figure>
<p>小结：chmod、chown、chgrp都可以对目录进行改权、改主、改组，但底下文件权限不会变，若要改变，使用-R递归操作</p>
<h2 id="基本权限ACL"><a href="#基本权限ACL" class="headerlink" title="基本权限ACL"></a>基本权限ACL</h2><p>access contral list 限制用户对文件的访问<br>ACL是UGO的补充，或者说是加强版<br>命令：<code>setfacl -m g:hr:rwx /home/file1</code></p>
<p>设置文件 -设置 对象：对象名：权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost tmp]# useradd alice</span><br><span class="line">[root@localhost tmp]# useradd jack</span><br><span class="line"></span><br><span class="line">[root@localhost tmp]# setfacl -m u:alice:rw /home/test.txt</span><br><span class="line">[root@localhost tmp]# setfacl -m u:jack:- /home/test.txt</span><br><span class="line">[root@localhost tmp]# getfacl /home/test.txt</span><br><span class="line">getfacl: Removing leading &#x27;/&#x27; from absolute path names</span><br><span class="line"># file: home/test.txt</span><br><span class="line"># owner: root</span><br><span class="line"># group: root</span><br><span class="line">user::rw-</span><br><span class="line">user:alice:rw-</span><br><span class="line">user:jack:---</span><br><span class="line">group::r--</span><br><span class="line">mask::rw-</span><br><span class="line">other::r--</span><br><span class="line">#删除alice对test.txt文件的权限</span><br><span class="line">[root@localhost tmp]# setfacl -x u:alice /home/test.txt</span><br><span class="line">[root@localhost tmp]# getfacl /home/test.txt</span><br><span class="line">getfacl: Removing leading &#x27;/&#x27; from absolute path names</span><br><span class="line"># file: home/test.txt</span><br><span class="line"># owner: root</span><br><span class="line"># group: root</span><br><span class="line">user::rw-</span><br><span class="line">user:jack:---</span><br><span class="line">group::r--</span><br><span class="line">mask::r--</span><br><span class="line">other::r--</span><br></pre></td></tr></table></figure>
<h2 id="特殊权限（了解）"><a href="#特殊权限（了解）" class="headerlink" title="特殊权限（了解）"></a>特殊权限（了解）</h2><p>1、特殊位suid：高级权限类型（suid,(sgid)针对文件/程序时，具备临时获得属主权限）<br>suid是针对文件所设置的一个特别的权限。<br>功能：使调用文件的用户临时具备属主的能力<br>普通用户不能查看root目录下的文件，但赋予/usr/bin/cat一个s权限后，普通用户可以cat，root文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]#  cat /root/file1.txt</span><br><span class="line">cat: /root/file1.txt: 权限不够</span><br><span class="line">[root@localhost ~]# chmod u+s /usr/bin/cat</span><br><span class="line">[root@localhost ~]# ll /usr/bin/cat</span><br><span class="line">-rwsr-xr-x. 1 root root 54080 8月  20 2019 /usr/bin/cat</span><br><span class="line">[root@localhost ~]# cat /root/file1.txt</span><br><span class="line">123</span><br></pre></td></tr></table></figure>
<p>2、文件属性chattr<br>i:在文件上启用这个属性时，我们不能更改、重命名或者删除这文件<br>a:允许在文件中追加操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#chattr改变文件属性</span><br><span class="line">[root@localhost ~]# chattr +i ./file1.txt</span><br><span class="line">#lsattr列出文件属性</span><br><span class="line">[root@localhost ~]# lsattr ./file1.txt</span><br><span class="line">----i----------- ./file1.txt</span><br><span class="line">#不允许修改、删除文件</span><br><span class="line">[root@localhost ~]# rm -rf file1.txt</span><br><span class="line">rm: 无法删除&quot;file1.txt&quot;: 不允许的操作</span><br><span class="line">#去除i属性</span><br><span class="line">[root@localhost ~]# chattr -i ./file1.txt</span><br></pre></td></tr></table></figure>
<p>3、进程掩码umask</p>
<h1 id="进程管理"><a href="#进程管理" class="headerlink" title="进程管理"></a>进程管理</h1><p>进程存在于计算机内存中，计算机内存中可同时存在多个进程，每个CPU上同时只会执行一个进程，但计算机上似乎能够同时运行多个进程。实际上这是计算机采用了“多道程序设计”技术，即计算机允许多个相互独立的程序同时进入内存，在内核的管理控制下，相互之间穿插运行。</p>
<h2 id="进程状态"><a href="#进程状态" class="headerlink" title="进程状态"></a>进程状态</h2><p>初始态、就绪态、运行态、睡眠态和终止态。</p>
<h2 id="进程管理-1"><a href="#进程管理-1" class="headerlink" title="进程管理"></a>进程管理</h2><p>1、ps 在命令行输入ps后按回车键就能查看当前系统中正在运行的进程。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">选项：</span><br><span class="line">a	显示当前终端机下的所有进程，包括其他用户启动的进程</span><br><span class="line">u	以用户的形式，显示系统中的进程</span><br><span class="line">x	忽略终端机，显示所有进程</span><br><span class="line">e	显示每个进程使用的环境变量</span><br><span class="line">r	只列出当前终端机中正在执行的进程</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-a	显示所有终端机中除阶段作业领导进程(拥有子进程的进程)之外的进程</span><br><span class="line">-e	显示所有进程</span><br><span class="line">-f	除默认项外，显示UUID、PPID、C、STIME项</span><br><span class="line">-o	指定显示哪些字段，字段名可以使用长格式，也可以使用“%字符”的短格式指定，多个字段名使用逗号分割</span><br><span class="line">-l	使用详细的格式显示进程信息</span><br></pre></td></tr></table></figure>
<p>进程是已启动的可执行程序的运行实例，进程有一下组成部分：<br>1、一个文件：<br>2、被分配内存空间：<br>3、有权限控制；<br>4、程序代码的一个或多个副本（也叫执行线程）；<br>5、拥有状态</p>
<p>ps -ef 显示含义（查看进程的父子关系）</p>
<p>列的含义</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">字段名</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">UID</td>
<td style="text-align:center">该进程执行的用户id</td>
</tr>
<tr>
<td style="text-align:center">PID</td>
<td style="text-align:center">进程id</td>
</tr>
<tr>
<td style="text-align:center">PPID</td>
<td style="text-align:center">该进程的父进程id，如果一个程序的父级进程找不到，该程序的进程被称之为僵尸进程</td>
</tr>
<tr>
<td style="text-align:center">C</td>
<td style="text-align:center">cpu的占用率，其形式是百分数</td>
</tr>
<tr>
<td style="text-align:center">STIME</td>
<td style="text-align:center">进行的启动时间</td>
</tr>
<tr>
<td style="text-align:center">TTY</td>
<td style="text-align:center">终端设备，发起该进程的设备识别符号，如果显示“?”则表示该进程不是由终端设备发起的</td>
</tr>
<tr>
<td style="text-align:center">TIME</td>
<td style="text-align:center">进程的执行时间</td>
</tr>
<tr>
<td style="text-align:center">CMD</td>
<td style="text-align:center">该进程的名称或者对应的路径</td>
</tr>
</tbody>
</table>
</div>
<p>案例（100%使用的命令）在ps的结果中过滤出想要查看的进程状态</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#ps -ef |grep 进程名称</span><br><span class="line">自定义显示内容</span><br><span class="line">ps  axo  user,pid,ppid,%mem | head -3</span><br></pre></td></tr></table></figure>
<p><strong>ps aux命令展示的进程信息</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>user</th>
<th>用户</th>
</tr>
</thead>
<tbody>
<tr>
<td>PID</td>
<td>进程的编号</td>
</tr>
<tr>
<td>%CPU</td>
<td>占用CPU时间的百分比</td>
</tr>
<tr>
<td>%MEM</td>
<td>占用内存空间的百分</td>
</tr>
<tr>
<td>VSZ RSS</td>
<td>虚拟内存和实际内存占用大小</td>
</tr>
<tr>
<td>TTY</td>
<td>终端类型</td>
</tr>
<tr>
<td>STAT</td>
<td>运行，睡眠，停止，退出，僵死</td>
</tr>
<tr>
<td>START</td>
<td>进程启动时间</td>
</tr>
<tr>
<td>TIME</td>
<td>占用cpu的时间</td>
</tr>
<tr>
<td>COMMAND</td>
<td>程序的路径和名称</td>
</tr>
</tbody>
</table>
</div>
<p>2、top命令可以实时观察系统的整体运行情况，默认时间间隔为3s，即每3秒更新一次界面，是一个很实用的系统性能检测工具。</p>
<p><code>top [选项]</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">top -d 1 //每1秒刷新</span><br><span class="line">top -d 1 -p 进程号	//查看指定进程的动态信息</span><br></pre></td></tr></table></figure>
<p>3、pstree</p>
<p>一个新进程由已存在的进程创建，创建新进程的进程与新创建的进程为父子进程，一个父进程可以创建多个子进程，由同一个进程创建的多个子进程又称为兄弟进程。</p>
<p>pstree命令可以以树状的形式显示系统中的进程，直接观察进程之间的派生关系</p>
<p><code>pstree [选项]</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">选项：</span><br><span class="line">-a	显示每个进程的完整命令</span><br><span class="line">-c	不使用精简标识法</span><br><span class="line">-h	列出树状图，特别标明当前正在执行的进程</span><br><span class="line">-u	显示用户名称</span><br><span class="line">-n	使用程序识别码排序</span><br></pre></td></tr></table></figure>
<p>4、pgrep</p>
<p>命令根据进程名从进程队列中查找进程，查找成功后默认显示进程的pid</p>
<p>5、nice</p>
<p>进程的优先级会影响进程执行的顺序，在linux系统中，可通过改变进程的nice值来更改进程的优先级</p>
<p><code>nice [选项] [参数]</code></p>
<p>如修改bash的优先级为5 <code>nice -n 5 bash</code></p>
<p>6、jobs</p>
<p>使用jobs命令可以查看当前内存中的作业列表</p>
<p>7、bg和fg</p>
<p>使用快捷键Ctrl+Z也能将进程调入后台，但调入后台的进程会被暂时停止。若要将后台的命令调回前台继续执行，可以使用fg命令</p>
<p><code>fg 作业号</code></p>
<p>8、kill</p>
<p>kill命令一般用于管理进程，它的工作原理是发送某个信号给指定进程，以改变进程的状态，命令格式</p>
<p><code>kill 选项 [参数]</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kill  序号(一般为9)  进程ID</span><br><span class="line">killall 服务名</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1) SIGHUP	重新加载配置       </span><br><span class="line">2) SIGINT	键盘中断Ctrl+C       </span><br><span class="line">3) SIGQUIT	键盘退出Ctrl+\，类似SIGINT   </span><br><span class="line">9) SIGKILL	强制终止，无条件     </span><br><span class="line">15) SIGTERM	终止（正常结束），缺省信号</span><br><span class="line">18) SIGCONT	继续</span><br><span class="line">19) SIGSTOP	暂停</span><br><span class="line">20) SIGTSTP	键盘暂停Ctrl+C   </span><br></pre></td></tr></table></figure>
<h1 id="管道和重定向"><a href="#管道和重定向" class="headerlink" title="管道和重定向"></a>管道和重定向</h1><h2 id="重定向和管道符"><a href="#重定向和管道符" class="headerlink" title="重定向和管道符"></a>重定向和管道符</h2><blockquote>
<p>FD,文件描述符，文件句柄进程使用文件描述符来管理打开的文件<br>作用：FD给文件一个描述符（软链接，数字范围0-255），进程调用文件时就不用使用长路径，直接使用文件描述符就可以调用文件进程了。<br>0号，标准输入（一个文件代表键盘，按键盘数字先进入文件中，然后通过0号FD进入程序中去），文件结果通过1号描述符输出在显示器文件，然后在显示器/终端显示出来，2号描述符，标准错误输出，输出在显示器文件，然后在显示器/终端显示出来。</p>
</blockquote>
<h2 id="输出重定向"><a href="#输出重定向" class="headerlink" title="输出重定向"></a>输出重定向</h2><p>可分为两种：正确输出和错误输出</p>
<p>正确输出：1&gt; 等价于 &gt; 1&gt;&gt; 等价于 &gt;&gt;<br>错误输出：2&gt; 没有简写 2&gt;&gt; 没有简写<br>将正确输出和错误输出重定向到一个文件里</p>
<h2 id="输入重定向发送邮件"><a href="#输入重定向发送邮件" class="headerlink" title="输入重定向发送邮件"></a>输入重定向发送邮件</h2><p>默认邮件发送的过程：<br>向系统其他用户发送邮件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost tmp]# mail -s &#x27;ssss&#x27; xulei			&#x27;ssss&#x27;  为标题</span><br><span class="line">你好呀！hello,world								   内容</span><br><span class="line">.												按键 . 表示输入完成</span><br><span class="line">EOT												</span><br><span class="line">[root@localhost ~]# su - xulei						查看mail消息</span><br><span class="line">上一次登录：三 6月 23 13:23:16 CST 2021pts/0 上</span><br><span class="line">[xulei@localhost ~]$ mail				回车后按键1，再回车</span><br><span class="line">#使用重定向快速创建邮件</span><br><span class="line">[xulei@localhost ~]$ vim test01.txt</span><br><span class="line">[xulei@localhost ~]$ mail -s &#x27;标题&#x27; admin &lt; test01.txt	将内容以文本编辑发送</span><br><span class="line">[xulei@localhost ~]$ su - admin</span><br><span class="line">密码：</span><br><span class="line">上一次登录：五 6月 25 17:46:20 CST 2021:0 上</span><br><span class="line">[admin@localhost ~]$ mail</span><br></pre></td></tr></table></figure>
<h2 id="管道符"><a href="#管道符" class="headerlink" title="管道符"></a>管道符</h2><h3 id="进程管道"><a href="#进程管道" class="headerlink" title="进程管道"></a>进程管道</h3><p>1、管道命令可以将多条命令组合起来，一次性完成复杂的处理任务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cat /etc/passwd | grep &#x27;root&#x27;</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">[root@localhost ~]# cat /etc/passwd | grep &#x27;root&#x27; |tail -1</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">[root@localhost tmp]# cat /etc/passwd |grep ntp</span><br><span class="line">ntp:x:38:38::/etc/ntp:/sbin/nologin</span><br><span class="line">[root@localhost tmp]# cat /etc/passwd |grep ntp |cut -d: -f3  #cut命令，-d：（以冒号作为分隔符）-f3（切割第三列）</span><br><span class="line">38</span><br></pre></td></tr></table></figure>
<h3 id="tee管道"><a href="#tee管道" class="headerlink" title="tee管道"></a>tee管道</h3><p>三通管道，既交给另一个程序处理，又保存一份副本。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">passwd内容放到file1.txt，并且显示第一行在终端（类似水管的三通管）</span><br><span class="line">[root@localhost tmp]# cat /etc/passwd |tee file1.txt |head -1</span><br></pre></td></tr></table></figure>
<h3 id="参数传递Xargs"><a href="#参数传递Xargs" class="headerlink" title="参数传递Xargs"></a>参数传递Xargs</h3><p>cp、rm一些特殊命令就是不服其他程序</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost tmp]# touch file&#123;1..5&#125;	创建1-5的文件</span><br><span class="line">[root@localhost tmp]# cat files.txt		以下是文本内容</span><br><span class="line">/tmp/file1</span><br><span class="line">/tmp/file2</span><br><span class="line">[root@localhost tmp]# cat files.txt |rm -rvf		将文本的内容传到rm执行，结果失败</span><br><span class="line">[root@localhost tmp]# cat files.txt |xargs rm -rvf	 使用xargs参数，执行成功，v参数：显示信息</span><br><span class="line">已删除&quot;/tmp/file1&quot;</span><br><span class="line">已删除&quot;/tmp/file2&quot;</span><br></pre></td></tr></table></figure>
<p>使用&lt;&lt;EOF EOF指令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#写一个多行的代码文本</span><br><span class="line">[root@localhost dir1]# vim js.sh   			以下是脚本的内容</span><br><span class="line">cat &gt; /tmp/dir/tt.txt &lt;&lt;EOF					&lt;&lt;EOF  EOF用法（cat内容，将内容定向到tt.txt文中</span><br><span class="line">11111111111--第1行										</span><br><span class="line">22222222222--第2行							 具体内容  	</span><br><span class="line">33333333333--第3行					</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">[root@localhost dir1]# chmod +x js.sh</span><br><span class="line">[root@localhost dir1]# ./js.sh</span><br><span class="line">[root@localhost dir1]# cat tt.txt</span><br><span class="line">11111111111--第1行</span><br><span class="line">22222222222--第2行</span><br><span class="line">33333333333--第3行</span><br></pre></td></tr></table></figure>
<h1 id="磁盘管理"><a href="#磁盘管理" class="headerlink" title="磁盘管理"></a>磁盘管理</h1><h2 id="存储管理"><a href="#存储管理" class="headerlink" title="存储管理"></a>存储管理</h2><p>需要掌握的知识点：<br>1、磁盘长什么样？<br>2、磁盘有哪些？<br>3、什么是好磁盘，什么是次磁盘<br>4、把磁盘的软件操作（分区格式化）<br>5、写入输入数据到磁盘</p>
<p>磁盘类型：</p>
<p>​        机械硬盘 由：盘片、马达、磁头、磁臂等组成的机器结构存储器</p>
<p>​        固态硬盘：由芯片和集成电路组成。尺寸：2.5英寸、3.5英寸</p>
<p>转速：每分钟旋转的速度<br>5400转、7200转、15000转</p>
<p>接口：早期使用IDE，现在使用SATA</p>
<p>厂商：西部数据、希捷、三星、日立、金士顿</p>
<p>磁盘命名方式<br>kernel对不同接口硬盘的命名方式：如RHEL7/CentOs</p>
<p>（略）IDE（并口）</p>
<p>SATA（串口）：/dev/sda sda是一个文件，s代表sata就是串口，d代表磁盘，a代表第一块</p>
<p>磁盘分区方式<br>MBR：主引导记录（MBR，Master Boot Record）是 硬盘<br>支持最大磁盘容量是&lt;2TB，设计时分配四个分区。如果超过4个分区，需放弃主分区，改为扩展分区和逻辑分区。</p>
<p>GPT： 全局唯一标识分区表（GUID Partition Table，缩写：GPT）是一个实体磁盘的分区表的结构布局的标准。<br>支持最大磁盘容量是&gt;2TB，分配128个分区</p>
<p>使用MBR方式创建分区，可通过fdisk命令进行管理 fdisk [选项] [磁盘]</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">选项：</span><br><span class="line">-l	详细显示磁盘及其信息</span><br><span class="line">-s	显示磁盘分区容量（单位为block）</span><br><span class="line">-b	设置扇区大小（扇区大小取值为512、1024、2048或4096，单位为MB）			</span><br></pre></td></tr></table></figure>
<h2 id="管理磁盘"><a href="#管理磁盘" class="headerlink" title="管理磁盘"></a>管理磁盘</h2><p>详细解析 <a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_46860149/article/details/109718894">CentOS 7 磁盘挂载</a></p>
<p>三部曲：分区（隔间）、格式化（放家具/打造柜子格）、挂载（加个门/目录，才能访问）</p>
<p>1、创建和查看磁盘</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 查看</span><br><span class="line"># fdisk -l /dev/sdb	</span><br><span class="line"># lsblk</span><br><span class="line"># ll /dev/sd* 	</span><br><span class="line"></span><br><span class="line"># fdisk /dev/sdb	创建</span><br><span class="line"># partprobe /dev/sdb		刷新</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# fdisk /dev/sdb</span><br><span class="line">Welcome to fdisk (util-linux 2.23.2).</span><br><span class="line"></span><br><span class="line">Changes will remain in memory only, until you decide to write them.</span><br><span class="line">Be careful before using the write command.</span><br><span class="line"></span><br><span class="line">Device does not contain a recognized partition table</span><br><span class="line">Building a new DOS disklabel with disk identifier 0x4dc36548.</span><br><span class="line"></span><br><span class="line">Command (m for help): n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): p		//请选择主分区，或扩展分区</span><br><span class="line">Partition number (1-4, default 1):		//选择分区号</span><br><span class="line">First sector (2048-2097151, default 2048):	//选择磁盘开始的扇区</span><br><span class="line">Using default value 2048</span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G&#125; (2048-2097151, default 2097151): +200M</span><br><span class="line">Partition 1 of type Linux and of size 200 MiB is set		//选择磁盘分区结束的扇区，即分区大小，实际环境根据磁盘划分</span><br><span class="line"></span><br><span class="line">Command (m for help): w		//输入w保存分区信息，自动退出</span><br><span class="line">The partition table has been altered!</span><br><span class="line"></span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">Syncing disks.</span><br></pre></td></tr></table></figure>
<p>2、创建挂载信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# mkfs.ext4 /dev/sdb1			#使用ext4格式，格式化sdb1的磁盘 创建一个文件系统</span><br><span class="line">[root@localhost ~]# mkdir /mnt/disk1				#创建一个挂载目录</span><br><span class="line">[root@localhost ~]# mount -t ext4 /dev/sdb1 /mnt/disk1	#将磁盘挂载在目录上</span><br><span class="line">[root@localhost ~]# df -hT						#查看文件系统信息</span><br></pre></td></tr></table></figure>
<p>补充：系统目录结构是统一的（根下面有/mnt目录，在mnt/disk1里写入数据，并不是使用sda的内存空间，而是使用sdb1的空间），实际的内存存储在硬盘上。磁盘一旦被挂载，数据写入到新挂载的磁盘，而不是sda的内存。</p>
<p>3、MBR主引导记录是一个文件，共64个字节，每16个字节记录一个主分区，所以一块硬盘只有4个分区，如果想要超过4个分区，则需要一个主分区分出来成为扩展分区，扩展分区可以继续分为N个逻辑分区</p>
<h2 id="交换分区管理Swap"><a href="#交换分区管理Swap" class="headerlink" title="交换分区管理Swap"></a>交换分区管理Swap</h2><p>作用：“提升”内存的容量，防止OOM（out of memory）<br>实际生产：大于4GB而小于16GB，最小需要4GB交换空间<br>大于16GB而小于64GB，最小需要8GB交换空间<br>大于64GB而小于256GB，最小需要16GB交换空间</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# free -m					查看挂载信息</span><br><span class="line">             total    used     free   shared  buff/cache   available</span><br><span class="line">Mem:         972      428       201      10       342         391</span><br><span class="line">Swap:        3271      0        3271</span><br><span class="line">----------------------------------------------------------------------------------</span><br><span class="line">增加交换分区内存空间（以磁盘sde为例）</span><br><span class="line">[root@localhost ~]# fdisk /dev/sde	  #加一个扩展分区为1号  e  在扩展分区上加一个100M的逻辑分区l  分区为2号</span><br><span class="line">[root@localhost ~]# mkswap /dev/sde2</span><br><span class="line">[root@localhost ~]# swapon /dev/sde2</span><br><span class="line">[root@localhost ~]# free -m</span><br><span class="line">              total    used     free   shared  buff/cache   available</span><br><span class="line">Mem:            972    428       201      10       342         391</span><br><span class="line">Swap:          3371      0      3371</span><br><span class="line">由上可见，swap交换分区多了100M</span><br></pre></td></tr></table></figure>
<p>补充：在挂载的磁盘上/mnt/disk1写入数据(创建1-5的文件夹，数据指向/dev/sdb1)，然后卸载磁盘/dev/sdb1,进入/mnt/disk1并没有1-5的文件夹(此时数据指向sda)，此时再创建6-10的文件夹，挂载/dev/sdb1后，/mnt/disk1并没有6-10的文件夹，除非将挂载点转到/mnt/disk2。</p>
<p>逻辑卷LVM<br>目的：管理磁盘的一种方式，性质与基本磁盘无异<br>特点：随意扩张大小<br>PV：物理卷<br>VG：卷组<br>LV：逻辑卷</p>
<p>1、pvcreat命令用于将磁盘分区初始化为物理卷，命令格式 pvcreate [选项] 参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">选项：</span><br><span class="line">    -f	强制创建物理卷，不需要用户确认</span><br><span class="line">    -u	指定设备的UUID（通用唯一识别码）</span><br><span class="line">    -y	所有的问题都用yes回答</span><br><span class="line">    -z	是否使用前四个扇区（y/n）</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# pvcreate /dev/sdd		//将物理磁盘转换成物理卷-PV</span><br><span class="line">  Physical volume &quot;/dev/sdd&quot; successfully created.</span><br><span class="line">[root@localhost ~]# vgcreate vg1 /dev/sdd	//创建卷组VG</span><br><span class="line">  Volume group &quot;vg1&quot; successfully created</span><br><span class="line">[root@localhost ~]# lvcreate -L 800M -n lv1 vg1		//指定大小，创建逻辑卷 -L大小 -n卷名 vg1组名</span><br><span class="line">  Logical volume &quot;lv1&quot; created.</span><br><span class="line">[root@localhost ~]# mkfs.ext4 /dev/vg1/lv1	//创建文件系统并挂载  /dev/卷组名/逻辑卷名</span><br><span class="line">mke2fs 1.42.9 (28-Dec-2013)</span><br><span class="line">Filesystem label=</span><br><span class="line">OS type: Linux</span><br><span class="line">Block size=4096 (log=2)</span><br><span class="line">Fragment size=4096 (log=2)</span><br><span class="line">Stride=0 blocks, Stripe width=0 blocks</span><br><span class="line">51296 inodes, 204800 blocks</span><br><span class="line">10240 blocks (5.00%) reserved for the super user</span><br><span class="line">First data block=0</span><br><span class="line">Maximum filesystem blocks=209715200</span><br><span class="line">7 block groups</span><br><span class="line">32768 blocks per group, 32768 fragments per group</span><br><span class="line">7328 inodes per group</span><br><span class="line">Superblock backups stored on blocks:</span><br><span class="line">        32768, 98304, 163840</span><br><span class="line"></span><br><span class="line">Allocating group tables: done</span><br><span class="line">Writing inode tables: done</span><br><span class="line">Creating journal (4096 blocks): done</span><br><span class="line">Writing superblocks and filesystem accounting information: done</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# mkdir /mnt/lv1</span><br><span class="line">[root@localhost ~]# mount /dev/vg1/lv1 /mnt/lv1</span><br><span class="line">[root@localhost ~]# df -hT</span><br><span class="line">Filesystem              Type      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/centos-root xfs        17G  1.3G   16G   8% /</span><br><span class="line">devtmpfs                devtmpfs  478M     0  478M   0% /dev</span><br><span class="line">tmpfs                   tmpfs     489M     0  489M   0% /dev/shm</span><br><span class="line">tmpfs                   tmpfs     489M  6.8M  482M   2% /run</span><br><span class="line">tmpfs                   tmpfs     489M     0  489M   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1               xfs      1014M  125M  890M  13% /boot</span><br><span class="line">tmpfs                   tmpfs      98M     0   98M   0% /run/user/0</span><br><span class="line">/dev/mapper/vg1-lv1     ext4      772M  1.6M  714M   1% /mnt/lv1</span><br><span class="line">[root@localhost ~]# dd if=/dev/zero of=/mnt/lv1/1.txt bs=1M count=800	//向目标分区写入大量数据，填满</span><br><span class="line">dd: error writing ‘/mnt/lv1/1.txt’: No space left on device</span><br><span class="line">754+0 records in</span><br><span class="line">753+0 records out</span><br><span class="line">790433792 bytes (790 MB) copied, 6.09358 s, 130 MB/s</span><br><span class="line">[root@localhost ~]# df -hT</span><br><span class="line">Filesystem              Type      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/centos-root xfs        17G  1.3G   16G   8% /</span><br><span class="line">devtmpfs                devtmpfs  478M     0  478M   0% /dev</span><br><span class="line">tmpfs                   tmpfs     489M     0  489M   0% /dev/shm</span><br><span class="line">tmpfs                   tmpfs     489M  6.8M  482M   2% /run</span><br><span class="line">tmpfs                   tmpfs     489M     0  489M   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1               xfs      1014M  125M  890M  13% /boot</span><br><span class="line">tmpfs                   tmpfs      98M     0   98M   0% /run/user/0</span><br><span class="line">/dev/mapper/vg1-lv1     ext4      772M  756M     0 100% /mnt/lv1</span><br><span class="line">[root@localhost ~]# pvcreate /dev/sde  //创建PV。将PV增加到VG中</span><br><span class="line">  Physical volume &quot;/dev/sde&quot; successfully created.</span><br><span class="line">[root@localhost ~]# pvs</span><br><span class="line">  PV         VG     Fmt  Attr PSize    PFree</span><br><span class="line">  /dev/sda2  centos lvm2 a--   &lt;19.00g      0</span><br><span class="line">  /dev/sdd   vg1    lvm2 a--  1020.00m 220.00m</span><br><span class="line">  /dev/sde          lvm2 ---     1.00g   1.00g</span><br><span class="line">[root@localhost ~]# vgextend vg1 /dev/sde		//扩容VG</span><br><span class="line">  Volume group &quot;vg1&quot; successfully extended</span><br><span class="line">[root@localhost ~]# pvs</span><br><span class="line">  PV         VG     Fmt  Attr PSize    PFree</span><br><span class="line">  /dev/sda2  centos lvm2 a--   &lt;19.00g       0</span><br><span class="line">  /dev/sdd   vg1    lvm2 a--  1020.00m  220.00m</span><br><span class="line">  /dev/sde   vg1    lvm2 a--  1020.00m 1020.00m</span><br><span class="line">[root@localhost ~]# vgs</span><br><span class="line">  VG     #PV #LV #SN Attr   VSize   VFree</span><br><span class="line">  centos   1   2   0 wz--n- &lt;19.00g    0</span><br><span class="line">  vg1      2   1   0 wz--n-   1.99g 1.21g</span><br><span class="line">  [root@localhost ~]# lvextend -L +200M /dev/vg1/lv1		//扩容LV</span><br><span class="line">  Size of logical volume vg1/lv1 changed from 800.00 MiB (200 extents) to 1000.00 MiB (250 extents).</span><br><span class="line">  Logical volume vg1/lv1 successfully resized.</span><br><span class="line">[root@localhost ~]# df -hT</span><br><span class="line">Filesystem              Type      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/centos-root xfs        17G  1.3G   16G   8% /</span><br><span class="line">devtmpfs                devtmpfs  478M     0  478M   0% /dev</span><br><span class="line">tmpfs                   tmpfs     489M     0  489M   0% /dev/shm</span><br><span class="line">tmpfs                   tmpfs     489M  6.8M  482M   2% /run</span><br><span class="line">tmpfs                   tmpfs     489M     0  489M   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1               xfs      1014M  125M  890M  13% /boot</span><br><span class="line">tmpfs                   tmpfs      98M     0   98M   0% /run/user/0</span><br><span class="line">/dev/mapper/vg1-lv1     ext4      772M  756M     0 100% /mnt/lv1</span><br><span class="line">[root@localhost ~]# resize2fs /dev/vg1/lv1</span><br><span class="line">resize2fs 1.42.9 (28-Dec-2013)</span><br><span class="line">Filesystem at /dev/vg1/lv1 is mounted on /mnt/lv1; on-line resizing required</span><br><span class="line">old_desc_blocks = 1, new_desc_blocks = 1</span><br><span class="line">The filesystem on /dev/vg1/lv1 is now 256000 blocks long.</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# df -hT</span><br><span class="line">Filesystem              Type      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/centos-root xfs        17G  1.3G   16G   8% /</span><br><span class="line">devtmpfs                devtmpfs  478M     0  478M   0% /dev</span><br><span class="line">tmpfs                   tmpfs     489M     0  489M   0% /dev/shm</span><br><span class="line">tmpfs                   tmpfs     489M  6.8M  482M   2% /run</span><br><span class="line">tmpfs                   tmpfs     489M     0  489M   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1               xfs      1014M  125M  890M  13% /boot</span><br><span class="line">tmpfs                   tmpfs      98M     0   98M   0% /run/user/0</span><br><span class="line">/dev/mapper/vg1-lv1     ext4      970M  756M  154M  84% /mnt/lv1</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>2、vgcreat命令用于将物理卷整合为卷组，语法格式 <code>vgcreate [选项] 卷组名称 物理卷路径1 物理卷路径2 ……</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">选项：</span><br><span class="line">-l	设置卷组上允许创建的最大逻辑卷数</span><br><span class="line">-p	设置卷组上允许添加的最大物理卷数</span><br><span class="line">-s	设置卷组上的最小存储单元（PE）</span><br><span class="line"></span><br><span class="line">用法：</span><br><span class="line"># 将物理卷/dev/sdc2、/dev/sdc4整合为卷组，并命名为vg1</span><br><span class="line">vgcreate vg1 /dev/sdc2 /dev/sdc4</span><br><span class="line">或者vgcreate vg1 /dev/sdc&#123;2,4&#125;</span><br><span class="line"></span><br><span class="line"># 将物理卷/dev/sdc2、/dev/sdc4整合为卷组，设置最小存储单位为8MB，并命名为vg2</span><br><span class="line">vgcreate -s 8M vg2 /dev/sdc2 /dev/sdc4</span><br></pre></td></tr></table></figure>
<p>3、lvcreate命令的功能是在已经存在的卷组中创建逻辑卷，命令格式</p>
<p><code>lvcreate [选项] 卷组名/路径 物理卷路径</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-n	逻辑卷名称</span><br></pre></td></tr></table></figure>
<p>4、vgdisplay用于显示LVM卷组信息，命令格式 vgdisplay [选项] 卷组</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">选项：</span><br><span class="line">-s	使用短格式输出信息</span><br><span class="line">-A	仅显示活动卷组的属性</span><br></pre></td></tr></table></figure>
<p>5、lvextend</p>
<p>当逻辑卷的可用空间不足时，需要为其拓展存储空间。使用LVM机制管理磁盘时可通过lvextend命令动态地调整分区大小，命令格式 </p>
<p><code>lvextend [选项] 逻辑卷</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">选项：</span><br><span class="line">-l	以PE为单位指定逻辑卷容量</span><br><span class="line">-L	指定逻辑卷的容量，单位B/S/K/M/G/T/P/E</span><br></pre></td></tr></table></figure>
<p>6、lvremove命令用于删除指定的LVM逻辑卷，若逻辑卷已经被挂载到系统中，则应先使用unmount命令将其卸载，再进行删除，命令格式 <code>lvremove [选项] 逻辑卷</code></p>
<p>lvremove命令的常用选项为-f，其功能为强制删除指定逻辑卷</p>
<p>删除卷组、物理卷分别使用vgremove、pvremove，删除是应逆向删除，即先删除逻辑分区、卷组，最后删除物理卷。</p>
<h2 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h2><p>蓝色的小方块在文件系统中称为块（block），每一块可以存放4096个字节（4K），如果一个文件有5K,它会占用2个块。如果file1占用1,2,5，file2占用3,4，产生文件碎片，使用inode文件记录file文件的碎片的存放位置。之所以一个500G的硬盘，实际没用500G显示，是因为它inode和每个块之间有</p>
<p>block：存储文件的实际数据，实际存储文件的内容，若文件较大，会占用多个 block，block大小默认为4K。</p>
<p>inode（索引节点）：每产生一个小片，就是一个inode，每个小片对应的就是块的位置，我们想调用块的时候就找索引。</p>
<p>记录文件的属性（文件的元数据metadata，元数据，文件的属性，大小，权限，属主，属组，连接数，块数量，块的编号），一个文件占用一个inode，同时记录此文件所在的block number。inode大小为128bytes。</p>
<p>（略）superblock：通俗易懂说，就是一堆inode和block的统称。</p>
<p>每使用一次mkfs.ext4，就是创建一个文件系统.</p>
<p>使用df -i 查看sdb2可以存放多少个文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost disk1]# df -i |grep sdb2</span><br><span class="line">/dev/sdb2                 51200      11     51189       1% /mnt/disk2</span><br><span class="line">						总创建量  已用量	剩余</span><br><span class="line">[root@localhost disk2]# ls</span><br><span class="line">lost+found</span><br><span class="line">[root@localhost disk2]# touch file&#123;1..51189&#125;		#创建51189个文件</span><br><span class="line">[root@localhost disk2]# touch aaa.txt			大于51189则无法创建</span><br><span class="line">touch: 无法创建&quot;aaa.txt&quot;: 设备上没有空间</span><br><span class="line">[root@localhost disk2]# df -i |grep sdb2</span><br><span class="line">/dev/sdb2                 51200   51200       0     100% /mnt/disk2</span><br><span class="line">#表示inode已经用完了，不能继续创建文件夹，但可以在其中的文件夹中写入数据。</span><br></pre></td></tr></table></figure>
<p>结论：磁盘空间的限制根据inode和block两方面，请清理掉填满的分区，避免不必要的报错。</p>
<h2 id="文件链接"><a href="#文件链接" class="headerlink" title="文件链接"></a>文件链接</h2><h3 id="符号链接"><a href="#符号链接" class="headerlink" title="符号链接"></a>符号链接</h3><p>1、创建一个文件，并输入内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost disk4]# echo 123 &gt; /file00</span><br><span class="line">[root@localhost disk4]# cat /file00</span><br><span class="line">123								硬		软</span><br><span class="line">[root@localhost disk4]# ln -s /file00 /tmp/file11   #创建软连接</span><br><span class="line">[root@localhost disk4]# cat /tmp/file11</span><br><span class="line">123</span><br><span class="line">[root@localhost disk4]# rm -rf /file00 删除硬连接，软连接不复存在  </span><br><span class="line">[root@localhost disk4]# cat /tmp/file11</span><br><span class="line">cat: /tmp/file11: 没有那个文件或目录</span><br><span class="line">#可以对源文件进行追加，软链接文件也有追加内容</span><br></pre></td></tr></table></figure>
<h3 id="硬链接-可以理解为文件备份"><a href="#硬链接-可以理解为文件备份" class="headerlink" title="硬链接(可以理解为文件备份)"></a>硬链接(可以理解为文件备份)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost disk4]# echo 222 &gt;/file2</span><br><span class="line">[root@localhost disk4]# cat /file2</span><br><span class="line">222</span><br><span class="line">[root@localhost disk4]# ln /file2 /tmp/file-h1</span><br><span class="line">[root@localhost disk4]# cat /tmp/file-h1</span><br><span class="line">222</span><br><span class="line">[root@localhost disk4]# rm -rf /file2</span><br><span class="line">[root@localhost disk4]# cat /tmp/file-h1</span><br><span class="line">222</span><br><span class="line">#把源文件删除，硬链接文件还存在原有数据</span><br></pre></td></tr></table></figure>
<h2 id="RAID磁盘列阵-了解"><a href="#RAID磁盘列阵-了解" class="headerlink" title="RAID磁盘列阵(了解)"></a>RAID磁盘列阵(了解)</h2><p>RAID 0<br>将N块硬盘上选择合理的带区来创建带区集。其原理是将类似于显示器隔行扫描，将数据分割成不同条带(Stripe)分散写入到所有的硬盘中同时进行读写。多块硬盘的并行操作使同一时间内磁盘读写的速度提升N倍。</p>
<p>RAID 1<br>称为磁盘镜像，原理是把一个磁盘的数据镜像到另一个磁盘上，也就是说数据在写入一块磁盘的同时，会在另一块闲置的磁盘上生成镜像文件，在不影响性能情况下最大限度的保证系统的可靠性和可修复性上，只要系统中任何一对镜像盘中至少有一块磁盘可以使用，甚至可以在一半数量的硬盘出现问题时系统都可以正常运行，当一块硬盘失效时，系统会忽略该硬盘，转而使用剩余的镜像盘读写数据，具备很好的磁盘冗余能力。虽然这样对数据来讲绝对安全，但是成本也会明显增加，磁盘利用率为50%。</p>
<p>RAID5（分布式奇偶校验的独立磁盘结构）。<br>从它的示意图上可以看到，它的奇偶校验码存在于所有磁盘上，其中的p0代表第0带区的奇偶校验值，其它的意思也相同。RAID5的读出效率很高，写入效率一般，块式的集体访问效率不错，RAID5至少需要3块磁盘。</p>
<p>缺点：</p>
<p>1、RAID0没有冗余功能，如果一个磁盘（物理）损坏，则所有的数据都无法使用。 2、RAID1磁盘的利用率最高只能达到50%(使用两块盘的情况下)，是所有RAID级别 中最低的。<br>3、RAID0+1以理解为是RAID 0和RAID 1的折中方案。RAID 0+1可以为系统提供数据安全保障，但保障程度要比 Mirror低而磁盘空间利用率要比Mirror高。</p>
<p>创建RAID</p>
<p>Linux系统中使用mdadm命令创建和管理RAID，语法格式 mdadm [模式] <RAID设备名> [选项] &lt;组件设备名&gt;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">模式：</span><br><span class="line">-A/--accemble			组合，组装一个预先存在的阵列</span><br><span class="line">-B/--build				构建，构建一个不需要超级块的阵列，阵列中的每个设备都没有超级块</span><br><span class="line">-C/--create				创建，创建一个新阵列</span><br><span class="line">-F/--follow/--monitor	 监视，监视一个或多个阵列的状态</span><br><span class="line">-G/--grow				增长，更改RAID的容量或阵列中的设备数目</span><br><span class="line">--auto-detect			自动侦测，请求内核启动任何自动检测的阵列</span><br><span class="line">-I/--incremental		增加，向阵列中添加单个设备，或从阵列中删除单个设备</span><br></pre></td></tr></table></figure>
<p>在-C模式下选项</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-l	指定RAID级别</span><br><span class="line">-n	指定设备数量</span><br><span class="line">-a&#123;yes/no&#125;	是否自动为其创建设备文件</span><br><span class="line">-c	指定数据块大小</span><br><span class="line">-x	指定空闲盘个数，空闲盘可自动顶替损坏的工作盘</span><br></pre></td></tr></table></figure>
<p>实验：准备四块硬盘</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]#ls /dev/sd* -l	//查看</span><br><span class="line">#创建RAID</span><br><span class="line">[root@localhost ~]#yum -y install mdadm 	//确保mdadm命令可用</span><br><span class="line">[root@localhost ~]# mdadm -C /dev/md0   -l5  -n3 -x1 /dev/sd&#123;h,i,j,k&#125;</span><br><span class="line">			-C创建RAID    RAID的名称	-l5 RAID5 数据盘3  热备盘数量1    磁盘</span><br><span class="line">mdadm: Defaulting to version 1.2 metadata</span><br><span class="line">mdadm: array /dev/md0 started.</span><br><span class="line"># 格式化，挂载</span><br><span class="line">[root@localhost ~]# mkfs.ext4 /dev/md0		格式化</span><br><span class="line">[root@localhost ~]# mkdir /mnt/raid5		创建挂载文件</span><br><span class="line">[root@localhost ~]# mount /dev/md0 /mnt/raid5	挂载</span><br><span class="line">[root@localhost ~]# cp -rf /etc/ /mnt/raid5/etc		使用raid5</span><br><span class="line">[root@localhost ~]# df -hT |tail -1</span><br><span class="line">/dev/md0                ext4      9.8G  126M  9.1G    2% /mnt/raid5</span><br><span class="line">#添加了4块5G的盘，显示了10G。因为两块盘是数据盘，第三块的校验盘，第四块的热备盘。</span><br><span class="line">[root@localhost ~]# mdadm -D /dev/md0		-D 查看raid5详细信息</span><br></pre></td></tr></table></figure>
<p>破坏一块磁盘</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# watch -n0.5 &#x27;mdadm -D /dev/md0 |tail -10&#x27;</span><br><span class="line">#实时查看信息</span><br><span class="line">[root@localhost ~]# mdadm /dev/md0 -f /dev/sde -r /dev/sde</span><br><span class="line">#模拟损坏的数据盘</span><br></pre></td></tr></table></figure>
<h1 id="查找和压缩"><a href="#查找和压缩" class="headerlink" title="查找和压缩"></a>查找和压缩</h1><h2 id="文件查找"><a href="#文件查找" class="headerlink" title="文件查找"></a>文件查找</h2><p>which ：命令查找</p>
<p>alias：起别名(可以输入别名就可以执行对应的命令)，语法：alias 别名=‘ls -l’</p>
<p>locate：文件查找，语法：locate 文件名</p>
<p>find：任意文件查找，语法：find 路径 选项 文件名（文件名记不全可用代替，如hos 就会查找以hos字样的文件）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">选项：</span><br><span class="line">    -name ：按照文件名区分大小写</span><br><span class="line">    -iname：不区分大小写 </span><br><span class="line">    -size：按文件大小查找（如后接 +5M）</span><br><span class="line">    -maxdepth：按照目录级查找（如find  / maxdepth 4  -a  -name  &quot;文件字眼&quot; ）</span><br><span class="line">            从根开始向下查找，包括根目录，总共4级</span><br><span class="line">    -user/group:  根据用户/组查找（如 find  /home -user  alice）</span><br><span class="line">    -type：按照文件类型查找（find  /dev/  -type b）(b:块设备，f：普通文件)</span><br><span class="line">    -perm：按照文件权限查找</span><br></pre></td></tr></table></figure>
<p>find后接命令：<br>find ………… -delete （表示将查到的内容删除）<br>find ………… -ok cp -rvf {} 目标目录  \; （-ok表示连接符，{}表示引用查找的内容后的文件，\;表示结束符）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# find /etc/ -name &#x27;ifcfg*&#x27; -ok cp -rvf &#123;&#125; /tmp \;</span><br></pre></td></tr></table></figure>
<h1 id="文件打包及压缩"><a href="#文件打包及压缩" class="headerlink" title="文件打包及压缩"></a>文件打包及压缩</h1><h2 id="打包"><a href="#打包" class="headerlink" title="打包"></a>打包</h2><p>tar命令本是用于备份文件的命令，该命令可以打包多个文件或目录，亦可将被打包的文件与目录中包中还原，</p>
<p>命令格式 <code>tar 选项 包名 [参数]</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">选项：</span><br><span class="line">-c	创建新的备份文件</span><br><span class="line">-x	从备份文件中还原文件</span><br><span class="line">-v	显示命令执行过程</span><br><span class="line">-f	指定备份文件</span><br><span class="line">-z	通打包完成后使用gzip命令将包压缩</span><br><span class="line">-j	打包完成后使用bzip2命令将包压缩</span><br><span class="line">-p	保留包中文件原来的属性</span><br><span class="line"></span><br><span class="line">用法：</span><br><span class="line"># 将目录test下的文件打包</span><br><span class="line">$ tar -cvf test.tar ./test</span><br><span class="line"></span><br><span class="line"># 将目录test下的文件打包,并以gzip命令将包压缩</span><br><span class="line">$ tar -zcvf test.tar.gz ./test</span><br><span class="line"></span><br><span class="line"># 将目录test下的文件打包,并以bzip2命令将包压缩</span><br><span class="line">$ tar -jcvf test.tar.bz2 ./test</span><br><span class="line"></span><br><span class="line">#从包test.tar.bz2中还原文件</span><br><span class="line">$ tar -xvf test.tar.bz2</span><br></pre></td></tr></table></figure>
<h2 id="压缩和解压"><a href="#压缩和解压" class="headerlink" title="压缩和解压"></a>压缩和解压</h2><p>1、zip/unzip命令</p>
<p>使用zip命令压缩文件时压缩包一般命名为”文件名.zip” <code>zip [选项] 压缩包名 参数</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">选项：</span><br><span class="line">-j	只保留文件名称及其内容，不存放任何目录名称</span><br><span class="line">-m	文件压缩完成后，删除原始文件</span><br><span class="line">-o	以压缩文件内拥有最新更改时间的文件为准，更新压缩文件的更改时间</span><br><span class="line">-r	当参数为目录时，递归处理目录下的所有文件和子目录</span><br><span class="line"></span><br><span class="line">$ zip -r dir1.zip dir1</span><br><span class="line">注意：不能在当前目录压缩该目录</span><br></pre></td></tr></table></figure>
<p>2、使用tar命令压缩 <code>tar [选项] [压缩包名] [源文件]</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">压缩类型分析（了解）</span><br><span class="line">[root@localhost ~]# tar -cf etc.tar /etc</span><br><span class="line">[root@localhost ~]# tar -czf etc.gz /etc</span><br><span class="line">[root@localhost ~]# tar -cjf etc.bz /etc</span><br><span class="line">[root@localhost ~]# tar -cJf etc.xz /etc</span><br><span class="line">压缩时间由上到下越来越长，压缩程度越来越狠</span><br><span class="line">[root@localhost ~]# ls -lh |grep etc</span><br><span class="line">-rw-r--r--. 1 root root  11M 6月  28 00:18 etc.bz</span><br><span class="line">-rw-r--r--. 1 root root  12M 6月  28 00:17 etc.gz</span><br><span class="line">-rw-r--r--. 1 root root  38M 6月  28 00:17 etc.tar</span><br><span class="line">-rw-r--r--. 1 root root 8.3M 6月  28 00:19 etc.xz</span><br></pre></td></tr></table></figure>
<h1 id="软件包管理"><a href="#软件包管理" class="headerlink" title="软件包管理"></a>软件包管理</h1><p>Linux提供了软件包的集中管理机制，该机制将软件以包的形式存储在仓库中，方便用户搜索、安装和管理软件包。</p>
<p>红帽系操作系统软件管理分类：yum、rpm、source、bin。</p>
<h2 id="RPM软件包管理"><a href="#RPM软件包管理" class="headerlink" title="RPM软件包管理"></a>RPM软件包管理</h2><blockquote>
<p>软件名称 版本号(主版本、次版本、修订号) 操作系统 cpu平台 </p>
<p>操作系统:el6 el5 fedora suse debin ubuntu </p>
<p>cpu平台:i386 486 586 686 表示32位软件 </p>
<p>​    x86_64 表示64为软件 </p>
<p>​    noarch 表示32,64通用</p>
</blockquote>
<p>一、RPM软件包分为两种：二进制包和源码包。</p>
<p>1、二进制包中封装的是编译后生成的可执行文件，类似于Windows系统的.exe文件，可使用rpm命令直接安装。</p>
<p>2、源码包中封装的是源代码，在安装之前需先安装源码包以生成源码，再对源码进行编译生成后缀名为.rpm的RPM包，之后才能安装软件本身。</p>
<p>3、后缀.rpm表示二进制包，后缀.src.rpm表示源码包<br><strong>RPM工具</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost Packages]#rpm -ivh  wget-1.14-18.el7_6.1.x86_64.rpm</span><br><span class="line">#使用-i:install  -v:显示安装信息  -h:百分比</span><br></pre></td></tr></table></figure>
<p>使用rpm安装软件包：<br>安装软件包：rpm -ivh 软件包<br>查询是否安装完成：rpm -q 软件包<br>查询软件安装路径：rpm -ql 软件名称<br>查询软件名称：rpm -qa |grep ftp<br>查询软件信息：rpm -qi 软件名称</p>
<p>删除软件包：rpm -evh wget-1.14-18.el7_6.1.x86_64（卸载的是软件，不用加.rpm后缀）<br>强制删除软件包（不安装依赖）：rpm -ivh 软件包 —force<br>删除软件包（不检查依赖）：rpm -ivh 软件包 —nodeps</p>
<p>查询某一个文件是哪个软件产生的：rpm -qf /etc/passwd</p>
<p>软件卸载：rpm -e 软件名称</p>
<p>查询软件的配置文件：rpm -qc 软件名称</p>
<p>​    —force 在安装的时候用(强制安装) </p>
<p>​    —nodeps 在卸载的时候用(卸载的时候不检查依赖关系)</p>
<p>无法自动安装依赖性软件包</p>
<p>出现下载错误信息：可能出现的原因，/etc/yum.repos.d 文件配置错误</p>
<h2 id="YUM工具"><a href="#YUM工具" class="headerlink" title="YUM工具"></a>YUM工具</h2><p>基于RPM包管理，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且依次安装所有依赖的软件包，无须繁琐地一次次下载、安装。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1、安装	install</span><br><span class="line">2、查询	list和info。</span><br><span class="line">yum list用于列出一个或一组软件包；yum info用于显示关于软件包或组的详细信息</span><br></pre></td></tr></table></figure>
<p>使用yum安装软件包</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">语法：yum  -y  install   软件包</span><br><span class="line">重新安装：yum  -y  reinstall  软件包</span><br><span class="line">更新：yum  -y  update  软件包</span><br><span class="line">查询软件包：yum  list   软件包</span><br><span class="line">卸载软件包：yum  -y  remove   软件包</span><br><span class="line">查看文件属于哪个软件：yum	provides vim	</span><br><span class="line">使用install把对应的软件包下载下来，即可以使用vim</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">清理Yum缓存:</span><br><span class="line">[root@localhost ~]# yum clean all</span><br><span class="line">缓存软件包信息:</span><br><span class="line">提高搜索/安装软件的速度</span><br><span class="line">[root@localhost ~]# yum makecache</span><br><span class="line">查询yum源信息:</span><br><span class="line">[root@localhost ~]# yum repolist</span><br><span class="line">查找软件:</span><br><span class="line">[root@localhost ~]# yum search mysql</span><br><span class="line">此命令会搜索到系统已经安装和yum源里没有安装的软件信息,可以用他简单测试yum是否好用</span><br><span class="line">查看软件依赖性关系:</span><br><span class="line">[root@localhost ~]# yum deplist</span><br><span class="line">查看文件属于哪个软件</span><br><span class="line">[root@localhost ~]# yum provides 想要安装的服务名</span><br><span class="line">查看系统已经安装好的软件和没有安装的软件:</span><br><span class="line">[root@localhost ~]# yum list</span><br><span class="line">查看系统已经安装好的软件组和没有安装的软件组:</span><br><span class="line">[root@localhost ~]# yum grouplist</span><br><span class="line">查看软件组包含的具体软件：</span><br><span class="line">[root@localhost ~]# yum groupinfo</span><br><span class="line">安装软件组:</span><br><span class="line">[root@localhost ~]# yum groupinstall ‘软件组名称’</span><br><span class="line">如果软件或者软件组名称内有空格，要给空格转义或者加引号</span><br><span class="line">安装软件:</span><br><span class="line">[root@localhost ~]# yum install 软件名称</span><br><span class="line">[root@localhost ~]# yum install mysql mysql-server -y</span><br><span class="line">-y跳过确认提示直接安装</span><br><span class="line">重装：</span><br><span class="line">[root@localhost ~]# yum reinstall 软件名</span><br><span class="line">卸载软件:</span><br><span class="line">[root@localhost ~]# yum erase mysql-server</span><br><span class="line">[root@localhost ~]# yum remove mysql-server</span><br></pre></td></tr></table></figure>
<h3 id="配置本地YUM源"><a href="#配置本地YUM源" class="headerlink" title="配置本地YUM源"></a>配置本地YUM源</h3><p>介绍：基于RPM包管理，能够从指定的服务器自动下载RPM包并且安装，可以自动依赖处理依赖性关系，并且一次安装所有依赖的软件包，无须繁琐的一次次下载，安装。</p>
<p><strong>yum 源的配置与更新</strong></p>
<p>（1）在etc/yum/repos.d目录下，找到CentOS6-Base.repo文件替换（即替换CentOS6-Base.repo文件中的所有内容）。</p>
<p>或者直接下载替换即可：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#配置阿里云源</span><br><span class="line">[root@localhost ~]#wget -O /etc/yum.repos.d/CentOS-Base.repo</span><br><span class="line">http://mirrors.aliyun.com/repo/Centos-7.repo</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://mirrors.aliyun.com/centos-vault/">centos-vault安装包下载_开源镜像站-阿里云 (aliyun.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/">清华大学开源软件镜像站 | Tsinghua Open Source Mirror</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"># CentOS-Base.repo</span><br><span class="line">#</span><br><span class="line"># The mirror system uses the connecting IP address of the client and the</span><br><span class="line"># update status of each mirror to pick mirrors that are updated to and</span><br><span class="line"># geographically close to the client.  You should use this for CentOS updates</span><br><span class="line"># unless you are manually picking other mirrors.</span><br><span class="line">#</span><br><span class="line"># If the mirrorlist= does not work for you, as a fall back you can try the </span><br><span class="line"># remarked out baseurl= line instead.</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"> </span><br><span class="line">[base]</span><br><span class="line">name=CentOS-$releasever - Base</span><br><span class="line">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=os&amp;infra=$infra</span><br><span class="line">#baseurl=https://mirrorlist.centos.org/centos/$releasever/os/$basearch/</span><br><span class="line">baseurl=https://mirrors.aliyun.com/centos-vault/7.4.1708/os/$basearch/</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br><span class="line"> </span><br><span class="line">#released updates </span><br><span class="line">[updates]</span><br><span class="line">name=CentOS-$releasever - Updates</span><br><span class="line">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=updates&amp;infra=$infra</span><br><span class="line">#baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos-vault/$releasever/updates/$basearch/</span><br><span class="line">baseurl=https://mirrors.aliyun.com/centos-vault/7.4.1708/updates/$basearch/</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br><span class="line"> </span><br><span class="line">#additional packages that may be useful</span><br><span class="line">[extras]</span><br><span class="line">name=CentOS-$releasever - Extras</span><br><span class="line">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=extras&amp;infra=$infra</span><br><span class="line">#baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos-vault/$releasever/extras/$basearch/</span><br><span class="line">baseurl=https://mirrors.aliyun.com/centos-vault/7.4.1708/extras/$basearch/</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br><span class="line"> </span><br><span class="line">#additional packages that extend functionality of existing packages</span><br><span class="line">[centosplus]</span><br><span class="line">name=CentOS-$releasever - Plus</span><br><span class="line">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=centosplus&amp;infra=$infra</span><br><span class="line">#baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos-vault/$releasever/centosplus/$basearch/</span><br><span class="line">baseurl=https://mirrors.aliyun.com/centos-vault/7.4.1708/centosplus/$basearch/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br><span class="line"> </span><br><span class="line">#contrib - packages by Centos Users</span><br><span class="line">[contrib]</span><br><span class="line">name=CentOS-$releasever - Contrib</span><br><span class="line">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=contrib&amp;infra=$infra</span><br><span class="line">#baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos-vault/$releasever/contrib/$basearch/</span><br><span class="line">baseurl=https://mirrors.aliyun.com/centos-vault/7.4.1708/contrib/$basearch/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</span><br></pre></td></tr></table></figure>
<p>连续执行以下命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install all</span><br><span class="line">yum makecache</span><br><span class="line">yum -y update</span><br></pre></td></tr></table></figure>
<h2 id="源码包管理"><a href="#源码包管理" class="headerlink" title="源码包管理"></a>源码包管理</h2><p>缺点：配置复杂</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.解压缩 tar -xf</span><br><span class="line">2.配置	./configure 用户	组	功能模块</span><br><span class="line">3.编译	make</span><br><span class="line">4.安装	make install</span><br></pre></td></tr></table></figure>
<h4 id="获取源码包"><a href="#获取源码包" class="headerlink" title="获取源码包"></a>获取源码包</h4><p>来源：官方网站（如：Apache:www.apache.org Nginx:www.nginx.org<br>Tengine:<a target="_blank" rel="noopener" href="https://tengine.taobao.org/">The Tengine Web Server (taobao.org)</a>）</p>
<p>在宿主机的源码包上传到VMare机器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#查找rz命令需要什么软件支持</span><br><span class="line">#rz：将window的文件拷贝到Linux			sz：将Linux的文件拷贝到Windows</span><br><span class="line">[root@localhost ~]# yum provides rz		</span><br><span class="line">[root@localhost ~]# yum install -y lrzsz-0.12.20-36.el7.x86_64</span><br><span class="line">#使用rz命令，打开在弹窗的文件包，即上传到当下目录</span><br><span class="line">[root@localhost ~]# rz</span><br><span class="line">[root@localhost ~]# yum clean all</span><br><span class="line"> [root@localhost ~]# yum makecache</span><br><span class="line">[root@localhost ~]# yum -y install gcc make zlib-devel pcre pcre-devel openssl-devel</span><br><span class="line">[root@localhost ~]# useradd www</span><br><span class="line">[root@localhost ~]# tar xvf tengine-3.0.0.tar.gz</span><br><span class="line">[root@localhost ~]# cd tengine-3.0.0/</span><br><span class="line">[root@localhost tengine-3.0.0]#</span><br><span class="line">./configure --user=www --group=www --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_sub_module --with-http_ssl_module --with-pcre</span><br><span class="line">[root@localhost tengine-3.0.0]# make</span><br><span class="line">[root@localhost tengine-3.0.0]# make install</span><br><span class="line">[root@localhost tengine-3.0.0]# lsof -i:80</span><br><span class="line">[root@localhost tengine-3.0.0]# yum provides lsof</span><br><span class="line">[root@localhost tengine-3.0.0]# yum install lsof-4.87-6.el7.x86_64</span><br><span class="line">[root@localhost tengine-3.0.0]# lsof -i:80</span><br><span class="line">[root@localhost tengine-3.0.0]# /usr/local/nginx/sbin/nginx</span><br><span class="line">[root@localhost tengine-3.0.0]# lsof -i:80</span><br></pre></td></tr></table></figure>
<h1 id="任务计划"><a href="#任务计划" class="headerlink" title="任务计划"></a>任务计划</h1><h2 id="一次性调度执行-at"><a href="#一次性调度执行-at" class="headerlink" title="一次性调度执行 at"></a>一次性调度执行 at</h2><p>语法：at</p>
<p>案例：now +5min<br>teatime tomorrow(teatime is 16:00)<br>noon +4 days<br>5pm august 3 2029<br>4:00 2021-11-27</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# at now+1min</span><br><span class="line">at&gt; useradd aaa</span><br><span class="line">at&gt; &lt;EOT&gt;</span><br><span class="line">job 3 at Sun Jul  4 11:41:00 2021</span><br><span class="line">[root@localhost ~]# id aaa</span><br><span class="line">uid=1006(aaa) gid=1008(aaa) 组=1008(aaa)</span><br></pre></td></tr></table></figure>
<h2 id="循环调度执行cron"><a href="#循环调度执行cron" class="headerlink" title="循环调度执行cron"></a>循环调度执行cron</h2><p>用于设置周期性被执行的指令，该命令从标准输入设备读取指令，并将其存放于“crontab”文件中，以供以后读取和执行。想让计算机干什么，就往里面写指令，不执行的就删掉。</p>
<p>1、程序不执行问题，查看进程状态</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# systemctl status crond.service </span><br><span class="line">[root@localhost ~]# ps aux |grep crond</span><br></pre></td></tr></table></figure>
<p>计划任务存储位置 /var/spool/cron</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">安装软件</span><br><span class="line">[root@localhost ~]# yum -y install crontabs</span><br><span class="line">启动服务</span><br><span class="line">rhel5/6:</span><br><span class="line">[root@localhost ~]# /etc/init.d/crond status</span><br><span class="line">[root@localhost ~]# /etc/init.d/crond start</span><br><span class="line">rhel7:</span><br><span class="line">[root@localhost ~]# systemctl start crond.service</span><br><span class="line">[root@localhost ~]# systemctl status crond.service</span><br><span class="line">[root@localhost ~]# systemctl enable crond.service</span><br><span class="line">开机启动(rhel5/6)</span><br><span class="line">[root@localhost ~]# chkconfig crond on</span><br><span class="line">创建计划任务：用户级别的计划任务</span><br><span class="line">[root@localhost ~]# crontab -u 用户 -e</span><br><span class="line">-u 指定用户 默认不写就是root</span><br><span class="line">[root@localhost ~]# crontab -e</span><br><span class="line">配置分两部分 拿空格分开</span><br><span class="line">第一部分:时间</span><br><span class="line">	分钟  小时  日   月    周</span><br><span class="line">范围 0-59 0-23 1-31 1-12 0-7</span><br><span class="line">上面的时间范围可以查看man手册: </span><br><span class="line">[root@localhost ~]# man 5 crontab</span><br><span class="line">各种时间写法：</span><br><span class="line">5 10 * * *</span><br><span class="line">5 10 8 * *</span><br><span class="line">1 5 7 * 5</span><br><span class="line">1,5,9 * * * *</span><br><span class="line">8-12 * * * *</span><br><span class="line">5-20,40 * * * *</span><br><span class="line">8-12,20-25 * * * *</span><br><span class="line">*/5 * * * *</span><br><span class="line"></span><br><span class="line">ps: * 表示每...</span><br><span class="line">    , 取不同的时间点</span><br><span class="line">    - 表示范围</span><br><span class="line">    */5 每5分钟</span><br><span class="line">第二部分:动作</span><br><span class="line">把上面规定的时间要执行的命令写在这里，当然包括脚本(最常用)，命令最好要写绝对路径</span><br><span class="line">查看计划任务:两种方法</span><br><span class="line">    1)[root@localhost ~]# crontab -l</span><br><span class="line">    -u 用户名 查看某一个账户的计划任务</span><br><span class="line">    2)[root@localhost ~]# cat /var/spool/cron/root</span><br><span class="line">    计划任务删除:两种方法</span><br><span class="line">    1)[root@localhost ~]# crontab -r -u wing</span><br><span class="line">    -r 删除</span><br><span class="line">    -u 指定用户</span><br><span class="line">    [root@localhost ~]# crontab -e -u tom</span><br><span class="line">    2)[root@localhost ~]# rm -f /var/spool/cron/root</span><br><span class="line">计划任务的权限控制</span><br><span class="line">    [root@localhost ~]# cat /etc/cron.deny</span><br><span class="line">    如果这个文件存在，凡是写到这个文件里面的账户不允许执行crontab命令</span><br><span class="line">    [root@localhost ~]# cat /etc/cron.allow</span><br><span class="line">    如果这个文件存在，没有写到这个文件里面的账户不允许执行crontab命令</span><br><span class="line">    如果有allow文件，那不管deny是否存在，都是只允许allow文件里面的用户</span><br></pre></td></tr></table></figure>
<h1 id="日志管理"><a href="#日志管理" class="headerlink" title="日志管理"></a>日志管理</h1><h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# route -n</span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">0.0.0.0         192.168.101.2   0.0.0.0         UG    100    0        0 ens33</span><br><span class="line">192.168.101.0   0.0.0.0         255.255.255.0   U     100    0        0 ens33</span><br><span class="line">[root@localhost ~]# ip r	//查看路由表</span><br><span class="line">default via 192.168.101.2 dev ens33 proto dhcp metric 100</span><br><span class="line">192.168.101.0/24 dev ens33 proto kernel scope link src 192.168.101.128 metric 100</span><br><span class="line">[root@localhost ~]# ip r d default	//删除默认网关</span><br><span class="line">[root@localhost ~]# ip r del 192.168.101.0/24	//删除静态路由</span><br><span class="line">[root@localhost ~]# ip r add default via 192.168.101.2 dev ens33	//添加默认网关</span><br><span class="line">[root@localhost ~]# ip r add 192.168.101.0/24 via 192.168.101.2 dev ens33	//添加静态路由</span><br></pre></td></tr></table></figure>
<h2 id="常见系统日志"><a href="#常见系统日志" class="headerlink" title="常见系统日志"></a>常见系统日志</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/var/log/message:记录Linux操作系统常见的系统和服务错误信息</span><br><span class="line">/var/log/boot.log:记录了系统在引导过程中发生的事件，就是Linux系统开机自检过程显示的信息</span><br><span class="line">/var/log/lastlog :记录最后一次用户成功登陆的时间、登陆IP等信息(一般通过命令lastlog查看)</span><br><span class="line">/var/log/secure : Linux系统安全日志,记录用户和工作组变坏情况、用户登陆认证情况</span><br><span class="line">/var/log/btmp :记录Linux登陆失败的用户、时间以及远程IP地址</span><br><span class="line">/var/log/wtmp:该日志文件永久记录每个用户登录、注销及系统的启动、停机的事件，使用1ast命令查看</span><br></pre></td></tr></table></figure>
<p>常用是1、4点，遇到错误提示时，可以查看系统日志，上图的第一点使用<br>在/root目录下，tailf /var/log/messages # 实时查看系统日志</p>
<h2 id="日志类型"><a href="#日志类型" class="headerlink" title="日志类型"></a>日志类型</h2><p>auth pam 产生的日志 </p>
<p>authpriv ssh，ftp 等登录信息的验证信息 </p>
<p>cron 时间任务相关 </p>
<p>kern 内核 </p>
<p>lpr 打印 </p>
<p>mail 邮件 </p>
<p>mark(syslog)-rsyslog 服务内部的信息，时间标识 </p>
<p>news 新闻组 </p>
<p>user 用户程序产生的相关信息</p>
<h2 id="日志的优先级"><a href="#日志的优先级" class="headerlink" title="日志的优先级"></a>日志的优先级</h2><p>日志的优先级分为7种，级别代号0~7：<br>0 debug 有调试信息的，日志信息最多<br>1 info 一般信息的日志，最常用<br>2 notice 最具有重要性的普通条件的信息<br>3 warning 警告级别<br>4 err 错误级别，阻止某个功能或者模块不能正常工作的信息<br>5 crit 严重级别，阻止整个系统或者整个软件不能工作的信息<br>6 alert 需要立即修改的信息<br>7 emerg 内核崩溃等严重信息<br>none 什么都不记录</p>
<h2 id="自定义日志"><a href="#自定义日志" class="headerlink" title="自定义日志"></a>自定义日志</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]#vim /etc/rsyslog.conf</span><br><span class="line">日志对象(设备):你要对什么东东做日志</span><br><span class="line">日志级别:级别越低，信息越多</span><br><span class="line">日志文件:存储日志的文件</span><br><span class="line">日志对象.日志级别 日志文件</span><br><span class="line">. 大于或者等于后面指定的日志级别</span><br><span class="line">.= 等于后面指定的日志级别</span><br><span class="line">.! 非</span><br><span class="line">例：</span><br><span class="line">*.* /var/log/mylog</span><br><span class="line">kern.err /var/log/kernel.log</span><br><span class="line">*.info;mail.none /var/log/big.log</span><br><span class="line">mail.info /var/log/mail.log</span><br><span class="line">cron.info;cron.!err /var/log/newcron</span><br><span class="line">cron.info /var/log/newcron</span><br><span class="line">重启日志服务：</span><br><span class="line">systemctl restart rsyslog</span><br></pre></td></tr></table></figure>
<h2 id="日志进程rsyslog"><a href="#日志进程rsyslog" class="headerlink" title="日志进程rsyslog"></a>日志进程rsyslog</h2><p>系统专职日志程序，处理大部分日志记录，操作系统有关的信息，如登录信息，程序启动关闭信息，错误信息。</p>
<p>任务一：rsyslog系统日志管理 关心的问题：哪类程序，产生什么的日志，放在什么地方</p>
<p>查看日志进程</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ps aux | grep rsyslogd</span><br><span class="line">root      20730  0.0  0.4 214460  4644 ?        Ssl  15:48   0:00 /usr/sbin/rsyslogd -n</span><br><span class="line">root      69210  0.0  0.0 112812   976 pts/1    R+   17:02   0:00 grep --color=auto rsyslogd</span><br></pre></td></tr></table></figure>
<p>动态查看日志文件的尾部：tail -f /var/log/messages 开启两个终端窗口</p>
<p>查看各种日志 /var/log</p>
<h2 id="rsyslog配置文件"><a href="#rsyslog配置文件" class="headerlink" title="rsyslog配置文件"></a>rsyslog配置文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost log]# rpm -qc rsyslog      #查看配置文件</span><br><span class="line">/etc/logrotate.d/syslog			#rsyslogd相关文件，定义级别（了解）</span><br><span class="line">/etc/rsyslog.conf				#rsyslogd的主配置文件(告诉rsyslog进程什么日志，应该存放在哪)</span><br><span class="line">/etc/sysconfig/rsyslog			#和日志办轮转（切割）相关</span><br></pre></td></tr></table></figure>
<h2 id="日志轮转logrotate"><a href="#日志轮转logrotate" class="headerlink" title="日志轮转logrotate"></a>日志轮转logrotate</h2><p>任务二：将大量的日志，分割管理，删除旧日志</p>
<p>简介<br>记录程序运行时的各种信息，通过日志可以分析用户的行为，记录运行轨迹，查找程序问题，但磁盘空间有限，记录的信息再重要也只能记录最后一段时间发生的事。为了节省空间和整理方便，日志文件需要经常按时间或大小等维度分成多份，删除时间久远</p>
<p>工作原理<br>按照配置进行轮转，配置文件有主配置文件和子配置文件夹（自定义，便于管理）<br>主文件：/etc/ logrotate.conf （决定每个日志文件如何轮转）<br>子文件夹：/etc/logrotate.d/*</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost log]# vi /etc/logrotate.conf</span><br><span class="line">=================全局设置======================</span><br><span class="line">weekly		//轮转的周期，一周轮转</span><br><span class="line">rotate 4		//保留4份，当产生第五份的时候，自动删除最旧的一份</span><br><span class="line">create		//轮转后创建新文件</span><br><span class="line">dateext		//使用日期作为后缀</span><br><span class="line"># compress		//是否压缩</span><br><span class="line">include /etc/logrotate.d		//包含该目录下的子配置文件，程序运行，在读主										配置文件时，到子配置文件查看，读取</span><br><span class="line">/var/log/wtmp &#123;		//对某日志文件设置轮转的方法，优先级最高</span><br><span class="line">	monthly		//一个月轮转一次</span><br><span class="line">	minsize 1M		//最小达到1M才轮转，monthly and minsize</span><br><span class="line">	create 0664 root utmp		//轮转后创建文件并设置权限</span><br><span class="line">	rotate 1		//保留一份</span><br><span class="line">&#125;</span><br><span class="line">/var/log/btmp &#123;</span><br><span class="line">	missingok		//丢失不提示</span><br><span class="line">	monthly			//每月轮转一次</span><br><span class="line">	create 0600 root utmp		//轮转后创建新文件，并设置权限</span><br><span class="line">    rotate 1		//保留一份</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost log]# vim /etc/logrotate.d/yum	#子配置文件下的yum</span><br><span class="line">/var/log/yum.log &#123;</span><br><span class="line">    missingok</span><br><span class="line">    #notifempty</span><br><span class="line">    #maxsize 30k</span><br><span class="line">    #yearly</span><br><span class="line">    daily			#自定义每天轮转一次</span><br><span class="line">    rotate 3		#自定义保留三份</span><br><span class="line">    create 0600 root root</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#测试</span><br><span class="line">[root@localhost log]# date			#查看当下时间</span><br><span class="line">2021年 07月 09日 星期五 23:20:49 CST</span><br><span class="line">[root@localhost log]# date 07092322		#修改系统时间（月日时分）</span><br><span class="line">2021年 07月 09日 星期五 23:22:00 CST</span><br><span class="line">[root@localhost log]# logrotate /etc/logrotate.conf	#手动轮转日志</span><br><span class="line">[root@localhost log]# ls /var/log/yum.*				#查看日志生成</span><br><span class="line">/var/log/yum.log  /var/log/yum.log-20210709</span><br></pre></td></tr></table></figure>
<h2 id="日志安全"><a href="#日志安全" class="headerlink" title="日志安全"></a>日志安全</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost log]# vim /etc/logrotate.d/syslog </span><br><span class="line">/etc/logrotate.d/messages</span><br><span class="line">建议测试时先把/etc/logrotate.d/syslog中messages删除</span><br><span class="line">#设置messages轮转</span><br><span class="line">/var/log/messages &#123;</span><br><span class="line"> prerotate			#设置轮转前的动作</span><br><span class="line">     chattr -a /var/log/messages     </span><br><span class="line"> endscript			#动作结束</span><br><span class="line"></span><br><span class="line"> daily</span><br><span class="line"> create 0777 root root</span><br><span class="line"> missingok</span><br><span class="line"> rotate 3</span><br><span class="line"></span><br><span class="line"> postrotate			#轮转之后的动作</span><br><span class="line">    chattr +a /var/log/messages</span><br><span class="line"> endscript</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">[root@localhost log]# logrotate /etc/logrotate.conf	#手动轮转测试配置文件无误。</span><br><span class="line"></span><br><span class="line">#为多个日志文件配置日志轮转</span><br><span class="line">[root@localhost ~]#vim /etc/logrotate.d/syslog</span><br><span class="line">/var/log/cron</span><br><span class="line">/var/log/maillog</span><br><span class="line">/var/log/secure</span><br><span class="line">/var/log/spooler</span><br><span class="line">&#123;</span><br><span class="line">    missingok</span><br><span class="line">    sharedscripts</span><br><span class="line">    postrotate</span><br><span class="line">    	/bin/kill -HUP `cat /var/run/syslogd.pid 2&gt; /dev/null` 2&gt; /dev/null || true</span><br><span class="line">    endscript</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="网络管理"><a href="#网络管理" class="headerlink" title="网络管理"></a>网络管理</h1><h2 id="ip地址的划分"><a href="#ip地址的划分" class="headerlink" title="ip地址的划分"></a>ip地址的划分</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">A类地址:范围从0-127，0是保留的并且表示所有IP地址，而127也是保留的地址，并且是用于测试环回用</span><br><span class="line">的。因此A类地址的范围其实是从1-126之间。</span><br><span class="line">如：10.0.0.1，第一段号码为网络号码，剩下的三段号码为本地计算机的号码。转换为2进制来说，一个A</span><br><span class="line">类IP地址由1字节的网络地址和3字节主机地址组成，网络地址的最高位必须是“0”， 地址范围从0.0.0.1</span><br><span class="line">到126.0.0.0。可用的A类网络有126个，每个网络能容纳1亿多个主机（2的24次方的-2主机数目）。</span><br><span class="line">以子网掩码来进行区别：：255.0.0.0</span><br><span class="line">127.0.0.0到127.255.255.255是保留地址，用做循环测试用的</span><br><span class="line">B类地址：范围从128-191，如172.168.1.1，第一和第二段号码为网络号码，剩下的2段号码为本地计算</span><br><span class="line">机的号码。转换为2进制来说，一个B类IP地址由2个字节的网络地址和2个字节的主机地址组成，网络地址</span><br><span class="line">的最高位必须是“10”，地址范围从128.0.0.0到191.255.255.255。可用的B类网络有16382个，每个网</span><br><span class="line">络能容纳6万多个主机 。(2的16次方-2)</span><br><span class="line">以子网掩码来进行区别：255.255.0.0</span><br><span class="line">169.254.0.0到169.254.255.255是保留地址。如果你的IP地址是自动获取IP地址，而你在网络上又没</span><br><span class="line">有找到可用的DHCP服务器，这时你将会从169.254.0.0到169.254.255.255中临时获得一个IP地址。</span><br><span class="line">C类地址：范围从192-223，如192.168.1.1，第一，第二，第三段号码为网络号码，剩下的最后一段号码</span><br><span class="line">为本地计算机的号码。转换为2进制来说，一个C类IP地址由3字节的网络地址和1字节的主机地址组成，网</span><br><span class="line">络地址的最高位必须是“110”。范围从192.0.0.0到223.255.255.255。C类网络可达209万余个，每个</span><br><span class="line">网络能容纳254个主机。(2的8次方-2)</span><br><span class="line">以子网掩码来进行区别： 255.255.255.0</span><br><span class="line">D类地址：范围从224-239，D类IP地址第一个字节以“1110”开始，它是一个专门保留的地址。它并不指向</span><br><span class="line">特定的网络，目前这一类地址被用在多点广播（Multicast）中。多点广播地址用来一次寻址一组计算</span><br><span class="line">机，它标识共享同一协议的一组计算机。</span><br><span class="line">224.0.0.0-239.255.255.255 组播地址</span><br><span class="line">E类地址：范围从240-254，以“11110”开始，为将来使用保留。 全零（“0．0．0．0”）地址对应于当前</span><br><span class="line">主机。全“1”的IP地址（“255．255．255．255”）是当前子网的广播地 址。</span><br><span class="line">240.0.0.0-255.255.255.254 保留地址</span><br></pre></td></tr></table></figure>
<h2 id="子网掩码"><a href="#子网掩码" class="headerlink" title="子网掩码"></a>子网掩码</h2><blockquote>
<p>就是为了区分ip地址的中的网络号和主机号的</p>
</blockquote>
<p>例1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ip地址: 202.197.119.110</span><br><span class="line">若掩码为:255.255.255.0 求网络号和主机号</span><br><span class="line">ip转换为2进制 1100 1010. 1100 0101. 0111 0111. 0110 1110</span><br><span class="line">子网掩码2进制 1111 1111. 1111 1111. 1111 1111. 0000 0000</span><br><span class="line">相与运算 1100 1010. 1100 0101. 0111 0111. 0000 0000 网络号</span><br><span class="line">ip转换为2进制 1100 1010. 1100 0101. 0111 0111. 0110 1110</span><br><span class="line">子网掩码取反 0000 0000. 0000 0000. 0000 0000. 1111 1111</span><br><span class="line">相与运算 0000 0000. 0000 0000. 0000 0000. 0110 1110 主机号</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ip 202.197.118.110 是否与上一个ip在同一网段? 求网络号，相同则同一网段</span><br><span class="line">ip转换为2进制 1100 1010. 1100 0101. 0111 0110.0110 1110</span><br><span class="line">求得网络号    1100 1010.1100 0101.0111 0110.0000 0000</span><br><span class="line">网络号 不同，所以不再同一网络中</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ip地址: 202.197.119.110</span><br><span class="line">若掩码为:255.255.128.0 求网络号和主机号</span><br><span class="line">ip转换为2进制 1100 1010. 1100 0101. 0111 0111. 0110 1110</span><br><span class="line">子网掩码2进制 1111 1111. 1111 1111. 1000 0000. 0000 0000</span><br><span class="line">相与运算 1100 1010. 1100 0101. 0000 0000. 0000 0000 网络号</span><br><span class="line">主机号 0000 0000. 0000 0000. 0111 0111. 0110 1110 主机号</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ip 202.197.118.110 是否与上一个ip再统一网段?</span><br><span class="line">ip转换为2进制 1100 1010. 1100 0101. 0111 0110. 0110 1110</span><br><span class="line">求得网络号    1100 1010.1100 0101.0000 0000. 0000 0000</span><br><span class="line">同上一个ip在同一个网络中</span><br><span class="line">所以判断两个ip是否在同一网络要看子网掩码的设置</span><br></pre></td></tr></table></figure>
<h2 id="网络接口名称规则"><a href="#网络接口名称规则" class="headerlink" title="网络接口名称规则"></a>网络接口名称规则</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ifconfig eth0 //单独查看eth0</span><br><span class="line">ifconfig //查看所有网卡</span><br><span class="line">ip a //查看所有网卡</span><br><span class="line">ip a s ens33	//单独查看ens33</span><br><span class="line">ifconfig ens33 192.168.2.250/24 //会覆盖旧的IP</span><br><span class="line">ifconfig ens33:0 192.168.2.251/24  //子网掩码可以不写</span><br><span class="line">ifconfig ens33 up //启动网卡</span><br><span class="line">ifup ens33	//启动网卡</span><br><span class="line">ifconfig ens33 down	//关闭网卡</span><br><span class="line">ifdown ens33	//关闭网卡</span><br></pre></td></tr></table></figure>
<p>1、认识网卡；2、找到网卡文件；3、学会修改文件；4，多台服务器互通</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]#/etc/sysconfig/network-scripts/	#查看网卡文件</span><br><span class="line">[root@localhost ~]#systemctl status NetworkManager	#查看网络管理程序状态</span><br><span class="line">[root@localhost ~]#systemctl status network			#重启网络</span><br><span class="line">[root@localhost ~]#vi /etc/sysconfig/network-scripts/ifcfg-ens33</span><br><span class="line">[root@localhost ~]# ip neigh   #查路由，网关</span><br><span class="line">[root@localhost ~]# ss -tnl		#查端口服务</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">DEVICE=eth0</span><br><span class="line">NAME=&quot;System eth0&quot; //名称 可以不存在</span><br><span class="line">BOOTPROTO=none //（none或static 静态获取 ）（dhcp 动态获取IP）</span><br><span class="line">NM_CONTROLLED=no //关闭NetworkManager</span><br><span class="line">ONBOOT=yes //开机启动</span><br><span class="line">TYPE=Ethernet // 以太网类型</span><br><span class="line">HWADDR=00:0c:29:8e:a5:d3 //MAC地址</span><br><span class="line">IPADDR=172.16.80.252 //IP地址</span><br><span class="line">NETMASK=255.255.0.0 //子网掩码</span><br><span class="line">PREFIX=24 //子网掩码</span><br><span class="line">NETWORK=172.16.0.0 //网络</span><br><span class="line">GATEWAY=172.16.0.1 //网关</span><br><span class="line">DNS1=172.16.0.1 //domain name server域名服务器</span><br><span class="line">DNS2=114.114.114.114 //第2台DNS服务器</span><br></pre></td></tr></table></figure>
<p>重启网络服务: 配置文件修改后必须重起网络服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart network //rhel7</span><br><span class="line">/etc/init.d/network restart //rhel5/6</span><br><span class="line"> service network restart //rhel5/6</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">最小化安装</span><br><span class="line">1.为你的服务器配置root密码</span><br><span class="line">2.配置IP地址</span><br><span class="line">3.配置YUM源</span><br><span class="line">4.关防火墙</span><br><span class="line">    systemctl stop firewalld</span><br><span class="line">    systemctl disable firewalld</span><br><span class="line">    systemctl status firewalld</span><br><span class="line">5.selinux</span><br><span class="line">    查看selinux getenforce</span><br><span class="line">    临时关闭	setenforce 0</span><br><span class="line">    永久关闭	vi /etc/sysconfig/selinux</span><br><span class="line">    SELINUX=disabled</span><br><span class="line">6.安装常用程序</span><br><span class="line">上传下载工具     系统状态   字符浏览器  下载工具  网络工具  自动补全</span><br><span class="line">    yum install -y lrzsz sysstat elinks wget net-tools bash-completion vim</span><br><span class="line">7.关机快照</span><br></pre></td></tr></table></figure>
<h2 id="网络测试工具"><a href="#网络测试工具" class="headerlink" title="网络测试工具"></a>网络测试工具</h2><p>使用ping命令</p>
<blockquote>
<p>用来测试主机之间网络的连通性。执行ping指令会使用ICMP传输协议，发出要求回应的信息，若 远端主机的网络功能没有问题，就会回应该信息，因而得知该主机运作正常。</p>
</blockquote>
<p>（linux）-c数字：表示发送多少个包<br>（windows）-n数字：表示发送多少个包<br>-t：一直发送数据包</p>
<p>ping www.baidu.com -i 0.01 # ping百度，间隔时间为0.01s</p>
<p>常用：ping -c1000 -i 0.01 www.baidu.com</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">ping 参数 目标主机</span><br><span class="line">参数 详解</span><br><span class="line">-a Audible ping.</span><br><span class="line">-A 自适应ping，根据ping包往返时间确定ping的速度；</span><br><span class="line">-b 允许ping一个广播地址；</span><br><span class="line">-B 不允许ping改变包头的源地址；</span><br><span class="line">-c count ping指定次数后停止ping；</span><br><span class="line">-d 使用Socket的SO_DEBUG功能；</span><br><span class="line">-F flow_label 为ping回显请求分配一个20位的“flow label”，如果未设置，内核会为ping随机分</span><br><span class="line">配；</span><br><span class="line">-f 极限检测，快速连续ping一台主机，ping的速度达到100次每秒；</span><br><span class="line">-i interval 设定间隔几秒发送一个ping包，默认一秒ping一次；</span><br><span class="line">-I interface 指定网卡接口、或指定的本机地址送出数据包；</span><br><span class="line">-l preload 设置在送出要求信息之前，先行发出的数据包；</span><br><span class="line">千锋云计算学院</span><br><span class="line">-L 抑制组播报文回送，只适用于ping的目标为一个组播地址</span><br><span class="line">-n 不要将ip地址转换成主机名；</span><br><span class="line">-p pattern 指定填充ping数据包的十六进制内容，在诊断与数据有关的网络错误时这个选项就非</span><br><span class="line">常有用，如：“-p ff”；</span><br><span class="line">-q 不显示任何传送封包的信息，只显示最后的结果</span><br><span class="line">-Q tos 设置Qos(Quality of Service)，它是ICMP数据报相关位；可以是十进制或十六进制数，详</span><br><span class="line">见rfc1349和rfc2474文档；</span><br><span class="line">-R 记录ping的路由过程(IPv4 only)；</span><br><span class="line">注意：由于IP头的限制，最多只能记录9个路由，其他会被忽略；</span><br><span class="line">-r 忽略正常的路由表，直接将数据包送到远端主机上，通常是查看本机的网络接口是否有问题；</span><br><span class="line">如果主机不直接连接的网络上，则返回一个错误。</span><br><span class="line">-S sndbuf Set socket sndbuf. If not specified, it is selected to buffer not more than one</span><br><span class="line">packet.</span><br><span class="line">-s packetsize 指定每次ping发送的数据字节数，默认为“56字节”+“28字节”的ICMP头，一共是84</span><br><span class="line">字节；</span><br><span class="line">包头+内容不能大于65535，所以最大值为65507（linux:65507, windows:65500）；</span><br><span class="line">-t ttl 设置TTL(Time To Live)为指定的值。该字段指定IP包被路由器丢弃之前允许通过的最大网段</span><br><span class="line">数；</span><br><span class="line">-T timestamp_option 设置IP timestamp选项,可以是下面的任何一个：</span><br><span class="line">    &#x27;tsonly&#x27; (only timestamps)</span><br><span class="line">    &#x27;tsandaddr&#x27; (timestamps and addresses)</span><br><span class="line">    &#x27;tsprespec host1 [host2 [host3]]&#x27; (timestamp prespecified hops).</span><br><span class="line">-M hint 设置MTU（最大传输单元）分片策略。</span><br><span class="line">可设置为：</span><br><span class="line">    &#x27;do&#x27;：禁止分片，即使包被丢弃；</span><br><span class="line">    &#x27;want&#x27;：当包过大时分片；</span><br><span class="line">    &#x27;dont&#x27;：不设置分片标志（DF flag）；</span><br><span class="line">-m mark 设置mark；</span><br><span class="line">-v 使ping处于verbose方式，它要ping命令除了打印ECHO-RESPONSE数据包之外，还打印其它</span><br><span class="line">所有返回的ICMP数据包；</span><br><span class="line">-U Print full user-to-user latency (the old behaviour).</span><br><span class="line">Normally ping prints network round trip time, which can be different f.e. due to DNS</span><br><span class="line">failures.</span><br><span class="line">-W timeout 以毫秒为单位设置ping的超时时间；</span><br><span class="line">-w deadline deadline；</span><br></pre></td></tr></table></figure>
<p>使用traceroute 命令</p>
<blockquote>
<p>通过traceroute我们可以知道信息从你的计算机到互联网另一端的主机是走的什么路径。当然每 次数据包由某一同样的出发点（source）到达某一同样的目的地(destination)走的路径可能会不 一样，但基本上来说大部分时候所走的路由是相同的。linux系统中，我们称之为traceroute,在 MS Windows中为tracert。 traceroute通过发送小的数据包到目的设备直到其返回，来测量其需 要多长时间。一条路径上的每个设备traceroute要测3次。输出结果中包括每次测试的时间(ms)和 设备的名称（如有的话）及其IP地址。</p>
</blockquote>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">traceroute www.baidu.com # 测试ping百度经过多少个网关</span><br><span class="line">traceroute -m 10 www.baidu.com # 设置ping百度10个网关</span><br><span class="line">traceroute -n www.baidu.com # 只显示ip地址 # 探测包使用基本UDP端口设置6888</span><br><span class="line">traceroute -p 6888 www.baidu.com</span><br><span class="line">#对外探测包响应时间为3秒</span><br><span class="line">traceroute -w 3 www.baidu.com</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">traceroute [参数] [主机]</span><br><span class="line"></span><br><span class="line">traceroute指令让你追踪网络数据包的路由途径，预设数据包大小是40Bytes，用户可另行设置</span><br><span class="line"></span><br><span class="line">#traceroute [-dFlnrvx][-f&lt;存活数值&gt;][-g&lt;网关&gt;...][-i&lt;网络界面&gt;][-</span><br><span class="line">m&lt;存活数值&gt;][-p&lt;通信端口&gt;][-s&lt;来源地址&gt;][-t&lt;服务类型&gt;][-w&lt;超时秒数&gt;][主机名称或IP地址]</span><br><span class="line">[数据包大小]</span><br><span class="line"></span><br><span class="line">-d 使用Socket层级的排错功能。</span><br><span class="line">-f 设置第一个检测数据包的存活数值TTL的大小。</span><br><span class="line">-F 设置勿离断位。</span><br><span class="line">-g 设置来源路由网关，最多可设置8个。</span><br><span class="line">-i 使用指定的网络界面送出数据包。</span><br><span class="line">-I 使用ICMP回应取代UDP资料信息。</span><br><span class="line">-m 设置检测数据包的最大存活数值TTL的大小。</span><br><span class="line">-n 直接使用IP地址而非主机名称。</span><br><span class="line">-p 设置UDP传输协议的通信端口。</span><br><span class="line">-r 忽略普通的Routing Table，直接将数据包送到远端主机上。</span><br><span class="line">-s 设置本地主机送出数据包的IP地址。</span><br><span class="line">-t 设置检测数据包的TOS数值。</span><br><span class="line">-v 详细显示指令的执行过程。</span><br><span class="line">-w 设置等待远端主机回报的时间。</span><br><span class="line">-x 开启或关闭数据包的正确性检验。</span><br></pre></td></tr></table></figure>
<p>Traceroute的工作原理</p>
<blockquote>
<p>Traceroute程序的设计是利用ICMP及IP header的TTL（Time To Live）栏位（field）。首先， traceroute送出一个TTL是1的IP datagram（其实，每次送出的为3个40字节的包，包括源地址， 目的地址和包发出的时间标签）到目的地，当路径上的第一个路由器（router）收到这个 datagram时，它将TTL减1。此时，TTL变为0了，所以该路由器会将此datagram丢掉，并送回一 个「ICMP time exceeded」消息（包括发IP包的源地址，IP包的所有内容及路由器的IP地址）， traceroute 收到这个消息后，便知道这个路由器存在于这个路径上，接着traceroute 再送出另一 个TTL是2 的datagram，发现第2 个路由器…… traceroute 每次将送出的datagram的TTL 加1来 发现另一个路由器，这个重复的动作一直持续到某个datagram 抵达目的地。当datagram到达目 的地后，该主机并不会送回ICMP time exceeded消息，因为它已是目的地了，那么traceroute如 何得知目的地到达了呢？ Traceroute在送出UDP datagrams到目的地时，它所选择送达的port number 是一个一般应用程 序都不会用的号码（30000 以上），所以当此UDP datagram 到达目的地后该主机会送回一个 「ICMP port unreachable」的消息，而当traceroute 收到这个消息时，便知道目的地已经到达 了。所以traceroute 在Server端也是没有所谓的Daemon 程式。 Traceroute提取发 ICMP TTL到期消息设备的IP地址并作域名解析。每次 ，Traceroute都打印出 一系列数据,包括所经过的路由设备的域名及 IP地址,三个包每次来回所花时间。</p>
</blockquote>
<h1 id="文件服务"><a href="#文件服务" class="headerlink" title="文件服务"></a>文件服务</h1><h2 id="Ftp-介绍"><a href="#Ftp-介绍" class="headerlink" title="Ftp 介绍"></a>Ftp 介绍</h2><p>文件传输协议（File Transfer Protocol，FTP），基于该协议FTP客户端与服务端可以实现共享文 件、上传文件、下载文件。 FTP 基于TCP协议生成一个虚拟的连接，主要用于控制FTP连接信息， 同时再生成一个单独的TCP连接用于FTP数据传输。用户可以通过客户端向FTP服务器端上传、下 载、删除文件，FTP服务器端可以同时提供给多人共享使用。 </p>
<p>FTP服务是Client/Server（简称C/S）模式，基于FTP协议实现FTP文件对外共享及传输的软件称之 为FTP服务器源端，客户端程序基于FTP协议，则称之为FTP客户端，FTP客户端可以向FTP服务器 上传、下载文件。 </p>
<p>目前主流的FTP服务器端软件包括：Vsftpd、ProFTPD、PureFTPd、Wuftpd、Server-U FTP、 FileZilla Server等软件，其中Unix/Linux使用较为广泛的FTP服务器端软件为Vsftpd 。 </p>
<h2 id="Ftp-传输模式介绍"><a href="#Ftp-传输模式介绍" class="headerlink" title="Ftp 传输模式介绍"></a>Ftp 传输模式介绍</h2><p>FTP基于C/S模式，FTP客户端与服务器端有两种传输模式，分别是FTP主动模式、FTP被动模式， 主被动模式均是以FTP服务器端为参照。 </p>
<p>FTP主动模式：客户端从一个任意的端口N（N&gt;1024）连接到FTP服务器的port 21命令端口，客 户端开始监听端口N+1，并发送FTP命令“port N+1”到FTP服务器，FTP服务器以数据端口（20）连 接到客户端指定的数据端口（N+1）。 </p>
<p>FTP被动模式：客户端从一个任意的端口N（N&gt;1024）连接到FTP服务器的port 21命令端口，客 户端开始监听端口N+1，客户端提交 PASV命令，服务器会开启一个任意的端口（P &gt;1024），并 发送PORT P命令给客户端。客户端发起从本地端口N+1到服务器的端口P的连接用来传送数据。 </p>
<p>企业实际环境中，如果FTP客户端与FTP服务端均开放防火墙，FTP需以主动模式工作，这样只需 要在FTP服务器端防火墙规则中，开放20、21端口即可。 </p>
<h2 id="Vsftp-服务器简介"><a href="#Vsftp-服务器简介" class="headerlink" title="Vsftp 服务器简介"></a>Vsftp 服务器简介</h2><p>非常安全的FTP服务进程（Very Secure FTP daemon，Vsftpd），Vsftpd在Unix/Linux发行版中 最主流的FTP服务器程序，优点小巧轻快，安全易用、稳定高效、满足企业跨部门、多用户的使用 （1000用户）等。 </p>
<p>Vsftpd基于GPL开源协议发布，在中小企业中得到广泛的应用，Vsftpd可以快速上手，基于Vsftpd 虚拟用户方式，访问验证更加安全。Vsftpd还可以基于MYSQL数据库做安全验证，多重安全防 护。 </p>
<h2 id="Vsftp-的登陆类型"><a href="#Vsftp-的登陆类型" class="headerlink" title="Vsftp 的登陆类型"></a>Vsftp 的登陆类型</h2><p>VSFTP提供了系统用户、匿名用户、和虚拟用户三种不同的登陆方式。所有的虚拟用户会映射成一个系 统用户，访问时的文件目录是为此系统用户的家目录；匿名用户也是虚拟用户，映射的系统用户为ftp， 详细信息可以通过man vsftpd.conf查看 </p>
<h2 id="Vsftp-安装配置"><a href="#Vsftp-安装配置" class="headerlink" title="Vsftp 安装配置"></a>Vsftp 安装配置</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#安装 epel 源</span><br><span class="line">[root@localhost ~]# yum -y install epel-release</span><br><span class="line"># 安装 vsftpd 及相关依赖</span><br><span class="line">[root@localhost ~]# yum -y install vsftpd* pam* db4*</span><br><span class="line">vsftpd： ftp软件 </span><br><span class="line">pam：认证模块 </span><br><span class="line">DB4：支持文件数据库</span><br></pre></td></tr></table></figure>
<h3 id="vsftpd-配置文件说明"><a href="#vsftpd-配置文件说明" class="headerlink" title="vsftpd 配置文件说明"></a>vsftpd 配置文件说明</h3><div class="table-container">
<table>
<thead>
<tr>
<th>配置文件</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>/etc/vsftpd/vsftpd.conf</td>
<td>vsftpd的核心配置文件</td>
</tr>
<tr>
<td>/etc/vsftpd/ftpusers</td>
<td>用于指定哪些用户不能访问FTP服务器</td>
</tr>
<tr>
<td>/etc/vsftpd/user_list</td>
<td>指定允许使用vsftpd的用户列表文件</td>
</tr>
<tr>
<td>/etc/vsftpd/vsftpd_conf_migrate.sh</td>
<td>是vsftpd操作的一些变量和设置脚本</td>
</tr>
<tr>
<td>/var/ftp/</td>
<td>默认情况下匿名用户的根目录</td>
</tr>
</tbody>
</table>
</div>
<h3 id="vsftpd-修改配置前备份配置文件"><a href="#vsftpd-修改配置前备份配置文件" class="headerlink" title="vsftpd 修改配置前备份配置文件"></a>vsftpd 修改配置前备份配置文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cd /etc/vsftpd/</span><br><span class="line">[root@localhost vsftpd]# ls</span><br><span class="line">ftpusers  user_list  vsftpd.conf  vsftpd_conf_migrate.sh</span><br><span class="line">[root@localhost vsftpd]# cp vsftpd.conf&#123;,.bak&#125;</span><br><span class="line">[root@localhost vsftpd]# ls</span><br><span class="line">ftpusers  user_list  vsftpd.conf  vsftpd.conf.bak  vsftpd_conf_migrate.sh</span><br></pre></td></tr></table></figure>
<h3 id="vsftpd-配置匿名用户"><a href="#vsftpd-配置匿名用户" class="headerlink" title="vsftpd 配置匿名用户"></a>vsftpd 配置匿名用户</h3><p>1、编辑配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost vsftpd]# cat vsftpd.conf | grep -v ^#</span><br><span class="line">[root@localhost vsftpd]# vim vsftpd.conf</span><br><span class="line"></span><br><span class="line">#:%d删除所有内容</span><br><span class="line">write_enable=YES</span><br><span class="line">anon_umask=022</span><br><span class="line"></span><br><span class="line">anon_upload_enable=YES</span><br><span class="line">anon_mkdir_write_enable=YES</span><br><span class="line">anon_other_write_enable=YES</span><br><span class="line">dirmessage_enable=YES</span><br><span class="line">xferlog_enable=YES</span><br><span class="line">connect_from_port_20=YES</span><br><span class="line">xferlog_std_format=YES</span><br><span class="line">listen=YES</span><br><span class="line">pam_service_name=vsftpd</span><br><span class="line">userlist_enable=YES</span><br><span class="line">tcp_wrappers=YES</span><br></pre></td></tr></table></figure>
<p>2、常用的匿名FTP配置项</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">anonymous_enable=YES 			# 是否允许匿名用户访问</span><br><span class="line">anon_umask=022 					# 匿名用户所上传文件的权限掩码</span><br><span class="line">anon_root=/var/ftp 				# 设置匿名用户的FTP根目录</span><br><span class="line">anon_upload_enable=YES 			# 是否允许匿名用户上传文件</span><br><span class="line">anon_mkdir_write_enable=YES 	# 是否允许匿名用户允许创建目录</span><br><span class="line">anon_other_write_enable=YES 	# 是否允许匿名用户有其他写入权</span><br><span class="line">（改名，删除，覆盖）</span><br><span class="line">anon_max_rate=0 				# 限制最大传输速率（字节/秒）0为</span><br><span class="line">无限制</span><br></pre></td></tr></table></figure>
<p>开启 vsftp 服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost vsftpd]# systemctl start vsftpd</span><br><span class="line">[root@localhost vsftpd]# netstat -lnpt |grep vsftpd</span><br></pre></td></tr></table></figure>
<p>修改权限实现上传</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost vsftpd]# cd /var/ftp/</span><br><span class="line">[root@localhost ftp]# ls</span><br><span class="line">pub</span><br><span class="line">[root@localhost ftp]# chown -R ftp.ftp pub/</span><br></pre></td></tr></table></figure>
<p>重点：改变根目录的属主，如果不改变的话，只能访问，其他权限不能生效。因为我们是以ftp用 户的身份访问的，而pub默认的属主属组是root。 </p>
<p>注意： 修改完配置之后需要重启完服务才能生效 还需要从新从客户端登陆，否则修改后的配置看不到效果。</p>
<h3 id="vsftp-配置本地（系统）用户"><a href="#vsftp-配置本地（系统）用户" class="headerlink" title="vsftp 配置本地（系统）用户"></a>vsftp 配置本地（系统）用户</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ftp]# useradd zhangsan</span><br><span class="line">[root@localhost ftp]# useradd lisi</span><br><span class="line">[root@localhost ftp]# echo &quot;123456&quot; | passwd --stdin zhangsan</span><br><span class="line">[root@localhost ftp]# echo &quot;123456&quot; | passwd --stdin lisi</span><br></pre></td></tr></table></figure>
<p>修改配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ftp]# vi /etc/vsftpd/vsftpd.conf</span><br><span class="line">local_enable=YES</span><br><span class="line">local_umask=077</span><br><span class="line">chroot_local_user=YES</span><br><span class="line">allow_writeable_chroot=YES</span><br><span class="line">userlist_deny=NO</span><br><span class="line"></span><br><span class="line">write_enable=YES</span><br><span class="line">dirmessage_enable=YES</span><br><span class="line">xferlog_enable=YES</span><br><span class="line">connect_from_port_20=YES</span><br><span class="line">xferlog_std_format=YES</span><br><span class="line">listen=YES</span><br><span class="line">pam_service_name=vsftpd</span><br><span class="line">userlist_enable=YES</span><br><span class="line">tcp_wrappers=YES</span><br></pre></td></tr></table></figure>
<p>常用的本地用户FTP配置项</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">local_enable=YES # 是否允许本地系统用户访问</span><br><span class="line">local_umask=022 # 本地用户所上传文件的权限掩码</span><br><span class="line">local_root=/var/ftp # 设置本地用户的FTP根目录</span><br><span class="line">chroot_list_enable=YES # 表示是否开启chroot的环境，默认</span><br><span class="line">没有开启</span><br><span class="line">chroot_list_file=/etc/vsftpd/chroot_list # 表示写</span><br><span class="line">在/etc/vsftpd/chroot_list文件里面的用户是不可以出chroot环境的。默认是可以的。</span><br><span class="line">Chroot_local_user=YES # 表示所有写</span><br><span class="line">在/etc/vsftpd/chroot_list文件里面的用户是可以出chroot环境的，和上面的相反。</span><br><span class="line">local_max_rate=0 # 限制最大传输速率（字节/秒）0为</span><br><span class="line">无限制</span><br></pre></td></tr></table></figure>
<p>添加用户到白名单</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ftp]# vi /etc/vsftpd/user_list</span><br><span class="line">zhangsan</span><br><span class="line">lisi</span><br></pre></td></tr></table></figure>
<p>重启服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart vsftpd</span><br></pre></td></tr></table></figure>
<h3 id="vsftp-配置虚拟用户"><a href="#vsftp-配置虚拟用户" class="headerlink" title="vsftp 配置虚拟用户"></a>vsftp 配置虚拟用户</h3><p>建立虚拟 FTP 用户的帐号</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -s /sbin/nologin vu</span><br></pre></td></tr></table></figure>
<p>创建虚拟用户文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cd /etc/vsftpd/</span><br><span class="line">[root@localhost vsftpd]# vi user</span><br><span class="line">wangwu</span><br><span class="line">12345</span><br><span class="line">maliu</span><br><span class="line">12345</span><br></pre></td></tr></table></figure>
<ul>
<li>基数行代表用户名，偶数行代表密码</li>
</ul>
<p>创建数据文件</p>
<ul>
<li>通过 db_load 工具创建出 Berkeley DB 格式的数据库文件</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost vsftpd]# db_load -T -t hash -f user user.db</span><br></pre></td></tr></table></figure>
<ul>
<li>-f 指定数据原文件 </li>
<li>-T 允许非Berkeley DB的应用程序使用文本格式转换的DB数据文件 </li>
<li>-t hash 读取文件的基本方法</li>
</ul>
<p>建立支持虚拟用户的PAM认证文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/pam.d/vsftpd.vu</span><br><span class="line">auth required /lib64/security/pam_userdb.so db=/etc/vsftpd/user</span><br><span class="line">account required /lib64/security/pam_userdb.so db=/etc/vsftpd/user</span><br></pre></td></tr></table></figure>
<ul>
<li>对应刚才生成 user.db 的文件</li>
</ul>
<p>修改配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost vsftpd]# vi vsftpd.conf</span><br><span class="line">write_enable=YES</span><br><span class="line">dirmessage_enable=YES</span><br><span class="line">xferlog_enable=YES</span><br><span class="line">connect_from_port_20=YES</span><br><span class="line">xferlog_std_format=YES</span><br><span class="line">listen=YES</span><br><span class="line">userlist_enable=YES</span><br><span class="line">tcp_wrappers=YES</span><br><span class="line">allow_writeable_chroot=YES</span><br><span class="line">local_enable=YES</span><br><span class="line">local_umask=077</span><br><span class="line">chroot_local_user=YES</span><br><span class="line"></span><br><span class="line">pam_service_name=vsftpd.vu</span><br><span class="line"></span><br><span class="line">guest_enable=YES</span><br><span class="line">guest_username=vu</span><br><span class="line">virtual_use_local_privs=YES</span><br><span class="line">user_config_dir=/etc/vsftpd/user_dir</span><br></pre></td></tr></table></figure>
<p>常用的全局配置项</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">listen=YES # 是否以独立运行的方式监听服务</span><br><span class="line">千锋云计算学院</span><br><span class="line">7、为用户建立独立的配置目录及文件</span><br><span class="line">8、创建虚拟用户数据存放目录</span><br><span class="line">listen_address=192.168.4.1 # 设置监听FTP服务的IP地址</span><br><span class="line">listen_port=21 # 设置监听FTP服务的端口号</span><br><span class="line">write_enable=YES # 是否启用写入权限（上传，删除文</span><br><span class="line">件）</span><br><span class="line">download_enable＝YES # 是否允许下载文件</span><br><span class="line">dirmessage_enable=YES # 用户切换进入目录时显</span><br><span class="line">示.message文件</span><br><span class="line">xferlog_enable=YES # 启用日志文件，记录</span><br><span class="line">到/var/log/xferlog</span><br><span class="line">xferlog_std_format=YES # 启用标准的xferlog日志格式，禁</span><br><span class="line">用此项将使用vsftpd自己的格式</span><br><span class="line">connect_from_port_20=YES # 允许服务器主动模式（从20端口建</span><br><span class="line">立数据连接）</span><br><span class="line">pasv_enable=YES # 允许服务器被动模式</span><br><span class="line">pasv_max_port=24600 # 设置被动模式服务器的最大端口号</span><br><span class="line">pasv_min_port=24500 # 设置被动模式服务器的最小端口号</span><br><span class="line">pam_service_name=vsftpd # 用户认证的PAM文件位置</span><br><span class="line">（/etc/pam.d/vsftpd.vu）</span><br><span class="line">userlist_enable=YES # 是否启用user_list列表文件</span><br><span class="line">userlist_deny=YES # 是否禁用user_list中的用户</span><br><span class="line">max_clients=0 # 限制并发客户端连接数</span><br><span class="line">max_per_ip=0 # 限制同一IP地址的并发连接数</span><br><span class="line">tcp_wrappers=YES # 是否启用tcp_wrappers主机访问</span><br><span class="line">控制</span><br><span class="line">chown_username=root # 表示匿名用户上传的文件的拥有人</span><br><span class="line">是root，默认关闭</span><br><span class="line">ascii_upload_enable=YES # 表示是否允许用户可以上传一个二</span><br><span class="line">进制文件，默认是不允许的</span><br><span class="line">ascii_download_enable=YES # 这个是代表是否允许用户可以下载</span><br><span class="line">一个二进制文件，默认是不允许的</span><br><span class="line">nopriv_user=vsftpd # 设置支撑Vsftpd服务的宿主用户为</span><br><span class="line">手动建立的Vsftpd用户</span><br><span class="line">async_abor_enable=YES # 设定支持异步传输功能</span><br><span class="line">ftpd_banner=Welcome to Awei FTP servers # 设定Vsftpd的登陆标语</span><br><span class="line">guest_enable=YES # 设置启用虚拟用户功能</span><br><span class="line">guest_username=ftpuser # 指定虚拟用户的宿主用户</span><br><span class="line">virtual_use_local_privs=YES # 设定虚拟用户的权限符合他们的宿</span><br><span class="line">主用户</span><br><span class="line">user_config_dir=/etc/vsftpd/vconf # 设定虚拟用户个人Vsftp的配置文件存放路径</span><br></pre></td></tr></table></figure>
<p>为用户建立独立的配置目录及文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost vsftpd]# mkdir /etc/vsftpd/user_dir</span><br><span class="line">[root@localhost vsftpd]# cd /etc/vsftpd/user_dir</span><br><span class="line">[root@localhost user_dir]# vi wangwu</span><br><span class="line">local_root=/etc/vsftpd/data # 虚拟用户数据的存放路径</span><br></pre></td></tr></table></figure>
<p>创建虚拟用户数据存放目录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost user_dir]# cd ..</span><br><span class="line">[root@localhost vsftpd]# mkdir data</span><br><span class="line">[root@localhost vsftpd]# chmod 777 data/</span><br></pre></td></tr></table></figure>
<p>重启服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart vsftpd</span><br></pre></td></tr></table></figure>
<h2 id="Ftp-客户端-lftp"><a href="#Ftp-客户端-lftp" class="headerlink" title="Ftp 客户端 lftp"></a>Ftp 客户端 lftp</h2><h3 id="lftp-介绍"><a href="#lftp-介绍" class="headerlink" title="lftp 介绍"></a>lftp 介绍</h3><p>lftp命令 是一款优秀的文件客户端程序，它支持ftp、SETP、HTTP和FTPs等多种文件传输协议。 lftp支持tab自动补全，记不得命令双击tab键，就可以看到可能的选项了。</p>
<h3 id="lftp-语法"><a href="#lftp-语法" class="headerlink" title="lftp 语法"></a>lftp 语法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lftp(选项)(参数)</span><br></pre></td></tr></table></figure>
<h3 id="lftp-选项"><a href="#lftp-选项" class="headerlink" title="lftp 选项"></a>lftp 选项</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-f：指定lftp指令要执行的脚本文件；</span><br><span class="line">-c：执行指定的命令后退出；</span><br><span class="line">--help：显示帮助信息；</span><br><span class="line">--version：显示指令的版本号。</span><br></pre></td></tr></table></figure>
<h3 id="lftp-参数"><a href="#lftp-参数" class="headerlink" title="lftp 参数"></a>lftp 参数</h3><ul>
<li>站点：要访问的站点的 ip 地址或者域名。</li>
</ul>
<h3 id="lftp-使用实例"><a href="#lftp-使用实例" class="headerlink" title="lftp 使用实例"></a>lftp 使用实例</h3><h4 id="登录ftp"><a href="#登录ftp" class="headerlink" title="登录ftp"></a>登录ftp</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lftp 用户名:密码@ftp地址:传送端口（默认21）</span><br></pre></td></tr></table></figure>
<ul>
<li>也可以先不带用户名登录，然后在接口界面下用login命令来用指定账号登录，密码不显示。</li>
</ul>
<h4 id="查看文件与改变目录"><a href="#查看文件与改变目录" class="headerlink" title="查看文件与改变目录"></a>查看文件与改变目录</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls</span><br><span class="line">cd # 对应ftp目录</span><br></pre></td></tr></table></figure>
<h4 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h4><ul>
<li>get当然是可以的，还可以：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mget -c *.pdf # 把所有的pdf文件以允许断点续传的方式下载。</span><br><span class="line">mirror aaa/ # 将aaa目录整个的下载下来，子目录也会自动复制。</span><br><span class="line">pget -c -n 10 file.dat # 以最多10个线程以允许断点续传的方式下载file.dat，可以通过</span><br><span class="line">设置pget:default-n的值而使用默认值。</span><br></pre></td></tr></table></figure>
<h4 id="上传"><a href="#上传" class="headerlink" title="上传"></a>上传</h4><ul>
<li>同样的put、mput都是对文件的操作，和下载类似。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mirror -R 本地目录名</span><br></pre></td></tr></table></figure>
<ul>
<li>将本地目录以迭代（包括子目录）的方式反向上传到ftp site。</li>
</ul>
<h4 id="模式设置"><a href="#模式设置" class="headerlink" title="模式设置"></a>模式设置</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set ftp:charset gbk</span><br></pre></td></tr></table></figure>
<ul>
<li>远程ftp site用gbk编码，对应的要设置为utf8,只要替换gbk为utf8即可。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set file:charset utf8</span><br></pre></td></tr></table></figure>
<ul>
<li>本地的charset设定为utf8,如果你是gbk，相应改掉。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set ftp:passive-mode 1</span><br></pre></td></tr></table></figure>
<ul>
<li>使用被动模式登录，有些site要求必须用被动模式或者主动模式才可以登录，这个开关就是设置这 个的。0代表不用被动模式。 </li>
</ul>
<h4 id="书签"><a href="#书签" class="headerlink" title="书签"></a>书签</h4><ul>
<li>其实命令行也可以有书签，在lftp终端提示符下：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bookmark add ustc</span><br></pre></td></tr></table></figure>
<ul>
<li>就可以把当前正在浏览的ftp site用ustc作为标签储存起来。以后在shell终端下，直接 lftp ustc 就可以自动填好用户名和密码，进入对应的目录了。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bookmark edit</span><br></pre></td></tr></table></figure>
<ul>
<li>会调用编辑器手动修改书签。当然，也可以看到，这个书签其实就是个简单的文本文件。密码，用 户名都可以看到。 </li>
</ul>
<h4 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/lftp.conf</span><br></pre></td></tr></table></figure>
<p>一般添加这几行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set ftp:charset gbk</span><br><span class="line">set file:charset utf8</span><br><span class="line">set pget:default-n 5</span><br></pre></td></tr></table></figure>
<ul>
<li>这样，就不用每次进入都要打命令了。其他的 set 可以自己 tab 然后 help 来看</li>
</ul>
<h2 id="NAS-存储"><a href="#NAS-存储" class="headerlink" title="NAS 存储"></a>NAS 存储</h2><h3 id="NAS-介绍"><a href="#NAS-介绍" class="headerlink" title="NAS 介绍"></a>NAS 介绍</h3><ul>
<li>NAS 指 Network Area Storage，网络连接存储(NAS)是连接到TCP/IP网络(通常是以太网)的文件级 数据存储设备。它通常使用网络文件系统(NFS)或CIFS协议，但也可以使用其他选项，如HTTP。它 一般是将本地的存储空间共享给其他主机使用，一般通过 C/S 架构实现通信。它实现的是文件级 别的共享，计算机通常将共享的设别识别为一个文件系统，其文件服务器会管理锁以实现并发访 问。常见的 NAS 有 NFS 和 CIFS。 </li>
<li>NAS在操作系统中显示为共享文件夹。工作人员像访问网络上的其他文件一样访问NAS中的文件。 NAS依赖于局域网运行，如果局域网出现故障，那么NAS服务将中断。 </li>
<li>NAS通常不像基于块存储的SAN速度那么快，但高速局域网可以克服大多数性能和延迟问题</li>
</ul>
<h3 id="SAN-介绍"><a href="#SAN-介绍" class="headerlink" title="SAN 介绍"></a>SAN 介绍</h3><ul>
<li>SAN 指 Storage Area Network，它将传输网络模拟成 SCSI 总线来使用，每一个主机的网卡相当 于 SCSI 总线中的 initiator，服务器相当于一个或多个 target，它需要借助客户端和服务端的 SCSI 驱动，通过 FC 或 TCP/IP 协议封装 SCSI 报文。它实现的是块级别的共享，通常被识别为一个块设 备，但是需要借助专门的锁管理软件才能实现多主机并发访问。 </li>
<li>SAN是用于整合块级存储的专用高性能网络。网络将存储设备、交换机和主机互连。高端企业存储 区域网络(SAN)还可能包括SAN导向器级交换机，以实现更高性能和更高效的容量使用 服务器使用主机总线适配器(HBA)连接到SAN结构。服务器将SAN标识为本地连接存储，因此多台 服务器可以共享一个存储池。</li>
<li>SAN不依赖局域网，并通过直接从连接的服务器卸载数据来减轻本地 网络的压力。</li>
</ul>
<h3 id="NAS-与-SAN-的区别"><a href="#NAS-与-SAN-的区别" class="headerlink" title="NAS 与 SAN 的区别"></a>NAS 与 SAN 的区别</h3><ul>
<li>Fabric。NAS使用TCP/IP网络，最常见的是以太网。传统SAN通常运行在高速光纤通道网络上，尽 管更多的SAN采用基于IP的光纤架构，这是因为光纤通道的成本和复杂性。高性能仍然是SAN的要 求，基于闪存的光纤协议有助于缩小光纤通道速度和IP速度之间的差距。 </li>
<li>数据处理。两种存储体系结构处理数据的方式不同：NAS处理基于文件的数据，而SAN处理块数 据。这个故事并不那么简单：NAS可以使用全局命名空间，SAN可以访问专门的SAN文件系统。全 局命名空间聚合多个NAS文件系统以呈现统一视图。SAN文件系统使服务器能够共享文件。在SAN 架构中，每台服务器都维护一个专用的非共享LAN。 SAN文件系统允许服务器通过对同一LAN上 的服务器提供文件级访问来安全共享数据。 </li>
<li>协议。NAS通过电缆直接连接以太网到以太网的交换机。NAS可以使用多种协议与服务器连接，包 括NFS、SMB/CIFS、HTTP。在SAN方面，服务器使用SCSI协议与SAN磁盘驱动器设备进行通信。 网络是使用SAS/SATA结构或将映射层映射到其他协议(例如光纤通道协议(FCP)，通过光纤通道映射 SCSI或通过TCP/IP映射SCSI形成的。 </li>
<li>性能。对于需要高速流量的环境，例如高交易数据库和电子商务网站，SAN的性能更高。由于NAS 速度较慢的文件系统层，NAS通常具有较低的吞吐量和较高的延迟，但高速网络可弥补NAS内部的 性能损失。 </li>
<li>可扩展性。入门级和NAS设备的可扩展性不高，但高端NAS系统使用集群或横向扩展节点扩展到 PB级。相反，可扩展性是购买SAN的主要驱动因素。其网络架构使管理员能够在扩展或扩展配置 中扩展性能和容量。 </li>
<li>价格。虽然高端NAS的价格会高于入门级SAN，但通常NAS的购买和维护成本较低。NAS设备与存 储区域网络相比，硬件和软件管理组件更少。行政费用也计入比较因素中。在复杂堆栈的基础上， 使用FC SAN管理SAN更为复杂。其经验法则是将购买成本的10到20倍的费用作为年度维护计算。 </li>
<li>易于管理。在一对一的比较中，NAS赢得了管理竞赛的便利。该设备可轻松插入局域网并提供简化 的管理界面。SAN需要比NAS设备更多的管理时间。部署通常需要对数据中心进行物理更改，而持 续管理通常需要专门的管理人员。对于SAN来说，例外的是更多的NAS设备不共享公共管理控制 台。</li>
</ul>
<h3 id="NAS-和-SAN-使用案例"><a href="#NAS-和-SAN-使用案例" class="headerlink" title="NAS 和 SAN 使用案例"></a>NAS 和 SAN 使用案例</h3><h4 id="NAS：当需要整合、集中和共享时"><a href="#NAS：当需要整合、集中和共享时" class="headerlink" title="NAS：当需要整合、集中和共享时"></a>NAS：当需要整合、集中和共享时</h4><ul>
<li>文件存储和共享。这是NAS在中小企业和企业远程办公室的主要用例。单个NAS设备允许IT整合多 个文件服务器，简化管理，节省空间和能源。 </li>
<li>活动档案。长期存档最好存储在成本比较低廉的存储介质上，如磁带或基于云计算的冷存储库。 NAS是搜索和访问活跃存档的理想选择，而高容量NAS可以替代大型磁带库进行存档。 </li>
<li>大数据。企业对于大数据有多种选择：横向扩展NAS、分布式JBOD节点、全闪存阵列、基于对象 的存储。横向扩展NAS适用于处理大型文件、ETL(提取，转换，加载)、智能数据服务(如自动分层 和分析)。NAS也是大型非结构化数据(如视频监控和流媒体)以及后期制作存储的理想选择。 </li>
<li>虚拟化。并非每个用户都在使用NAS来进行虚拟化网络销售，但用例正在增长，VMware和HyperV都支持NAS上的数据存储。当企业尚未拥有SAN时，这是新型或小型虚拟化环境的流行选择。 </li>
<li>虚拟桌面界面(VDI)。中档和高端NAS系统提供支持VDI的本机数据管理功能，如快速桌面克隆和重 复数据删除。 千锋云计算学院 </li>
</ul>
<h4 id="SAN：当需要加速，扩展和保护时"><a href="#SAN：当需要加速，扩展和保护时" class="headerlink" title="SAN：当需要加速，扩展和保护时"></a>SAN：当需要加速，扩展和保护时</h4><ul>
<li>数据库和电子商务网站。通用文件服务或NAS可用于较小的数据库，但高速事务环境需要SAN的高 I/O处理速度和非常低的延迟。这使SAN非常适合企业数据库和高流量电子商务网站。 </li>
<li>快速备份。服务器操作系统将SAN视为附加存储，从而实现对SAN的快速备份。由于服务器直接备 份到SAN，备份流量不会通过LAN传输。这可以在不增加以太网负载的情况下实现更快速的备份。 </li>
<li>虚拟化。NAS支持虚拟化环境，但SAN更适合大规模和/或高性能部署。存储区域网络可以在虚拟 机和虚拟化主机之间快速传输多个I/O流，并且拥有高扩展性支持动态处理。 </li>
<li>视频编辑。视频编辑应用程序需要非常低的延迟和非常高的数据传输速率。SAN提供这种高性能， 因为它直接连接到视频编辑桌面客户端，无需额外的服务器层。视频编辑环境需要第三方SAN分布 式文件系统和每节点负载均衡控制。 </li>
</ul>
<p>在NFS，FTP，SAMBA中，其中下载速度或者说性能最好的是NFS，其次FTP，最后SAMBA </p>
<h3 id="NFS-服务器和-samba-服务器介绍"><a href="#NFS-服务器和-samba-服务器介绍" class="headerlink" title="NFS 服务器和 samba 服务器介绍"></a>NFS 服务器和 samba 服务器介绍</h3><h4 id="NFS-介绍"><a href="#NFS-介绍" class="headerlink" title="NFS 介绍"></a>NFS 介绍</h4><ul>
<li>NFS 全称是 Network FileSystem，NFS 和其他文件系统一样，是在 Linux 内核中实现的，因此 NFS 很难做到与 Windows 兼容。NFS 共享出的文件系统会被客户端识别为一个文件系统，客户端 可以直接挂载并使用。 </li>
<li>NFS 的实现使用了 RPC（Remote Procedure Call） 的机制，远程过程调用使得客户端可以调用 服务端的函数。由于有 VFS 的存在，客户端可以像使用其他普通文件系统一样使用 NFS 文件系 统，由操作系统内核将 NFS 文件系统的调用请求通过 TCP/IP 发送至服务端的 NFS 服务，执行相 关的操作，之后服务端再讲操作结果返回客户端。</li>
</ul>
<p><img src="https://gitee.com/Bluetom/img2/raw/master/img20230403/202310191806116.jpeg" alt="img"></p>
<ul>
<li>NFS 文件系统仅支持基于 IP 的用户访问控制，NFS 是在内核实现的，因此 NFS 服务由内核监听在 TCP 和 UDP 的 2049 端口，对于 NFS 服务的支持需要在内核编译时选择。它同时还使用了几个用 户空间进程用于访问控制，用户映射等服务，这些程序由 nfs-utils 程序包提供。 </li>
<li>RPC 服务在 CentOS 6.5 之后改名为 portmapper，它监听在 TCP/UDP 的 111 端口，其他基于 RPC 的服务进程需要监听时，先像 RPC 服务注册，RPC 服务为其分配一个随机端口供其使用。客 户端在请求时，先向 RPC 服务请求对应服务监听的端口，然后再向改服务发出调用请求。 </li>
</ul>
<h4 id="Samba-简介"><a href="#Samba-简介" class="headerlink" title="Samba 简介"></a>Samba 简介</h4><ul>
<li><p>Samba是在Linux和UNIX系统上实现SMB协议的一个免费软件，由服务器及客户端程序构成。 SMB（Server Messages Block，信息服务块）是一种在局域网上共享文件和打印机的一种通信协 议，它为局域网内的不同计算机之间提供文件及打印机等资源的共享服务。SMB协议是客户机/服 务器型协议，客户机通过该协议可以访问服务器上的共享文件系统、打印机及其他资源。通过设置 “NetBIOS over TCP/IP”使得Samba不但能与局域网络主机分享资源，还能与全世界的电脑分享资 源。 </p>
</li>
<li><p>Samba最大的功能就是可以用于Linux与windows系统直接的文件共享和打印共享，Samba既可 以用于windows与Linux之间的文件共享，也可以用于Linux与Linux之间的资源共享。 </p>
</li>
<li><p>Samba由两个主要程序组成，它们是 smbd 和 nmbd 。这两个守护进程在服务器启动到停止期间持 续运行，功能各异。 Smbd 和 nmbd 使用的全部配置信息全都保存在smb.conf文件中。Smb.conf向 smbd和nmbd两个守护进程说明输出什么以便共享，共享输出给谁及如何进行输出。 </p>
</li>
<li><p>Samba提供了基于CIFS的四个服务：文件和打印服务、授权与被授权、名称解析、浏览服务。前 两项服务由 smbd 提供，后两项服务则由 nmbd 提供。 简单地说， smbd 进程的作用是处理到来的 SMB软件包，为使用该软件包的资源与Linux进行协商， nmbd 进程使主机(或工作站)能浏览Linux 服务器。 </p>
</li>
<li><p>SMB是Samba 的核心启动服务，主要负责建立 Linux Samba服务器与Samba客户机之间的对 话， 验证用户身份并提供对文件和打印系统的访问，只有SMB服务启动，才能实现文件的共享， 监听139 TCP端口；而NMB服务是负责解析用的，类似与DNS实现的功能，NMB可以把Linux系统 共享的工作组名称与其IP对应起来，如果NMB服务没有启动，就只能通过IP来访问共享文件，监 听137和138 UDP端口。 </p>
</li>
<li><p>Samba服务器的IP地址为192.168.122.15，对应的工作组名称为 MYWORKGROUP，那么在 Windows的IE浏览器输入下面两条指令都可以访问共享文件。其实这就是Windows下查看Linux Samba服务器共享文件的方法。 </p>
<p>\192.168.122.15\共享目录名称</p>
<p>\MYWORKGROUP\共享目录名称 </p>
</li>
<li><p>Samba服务器可实现如下功能：WINS和DNS服务； 网络浏览服务； Linux和Windows域之间的 认证和授权； UNICODE字符集和域名映射；满足CIFS协议的UNIX共享等。</p>
</li>
</ul>
<h3 id="安装配置-NFS-服务"><a href="#安装配置-NFS-服务" class="headerlink" title="安装配置 NFS 服务"></a>安装配置 NFS 服务</h3><h4 id="添加-hosts-解析"><a href="#添加-hosts-解析" class="headerlink" title="添加 hosts 解析"></a>添加 hosts 解析</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hosts [可选]</span><br><span class="line">192.168.101.100 zhangsan</span><br><span class="line">192.168.101.102 nas</span><br></pre></td></tr></table></figure>
<h4 id="安装-NFS-服务器"><a href="#安装-NFS-服务器" class="headerlink" title="安装 NFS 服务器"></a>安装 NFS 服务器</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y nfs-utils</span><br></pre></td></tr></table></figure>
<h4 id="创建-NFS-存储目录"><a href="#创建-NFS-存储目录" class="headerlink" title="创建 NFS 存储目录"></a>创建 NFS 存储目录</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /data</span><br></pre></td></tr></table></figure>
<h4 id="配置-NFS-服务"><a href="#配置-NFS-服务" class="headerlink" title="配置 NFS 服务"></a>配置 NFS 服务</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/exports</span><br><span class="line">/data 192.168.101.0/24(rw,sync,no_root_squash)</span><br></pre></td></tr></table></figure>
<p>192.168.101.0/24 一个网络号的主机可以挂载 NFS服务器上的 /data 目录到自己的文件系统中</p>
<h4 id="NFS-定制参数说明"><a href="#NFS-定制参数说明" class="headerlink" title="NFS 定制参数说明"></a>NFS 定制参数说明</h4><ul>
<li>ro：目录只读 </li>
<li>rw： 这个选项允许 NFS 客户机进行读/写访问。缺省选项是只读的。 </li>
<li>secure： 这个选项是缺省选项，它使用了 1024 以下的 TCP/IP 端口实现 NFS 的连接。指定 insecure 可以禁用这个选项。 </li>
<li>async： 这个选项可以改进性能，但是如果没有完全关闭 NFS 守护进程就重新启动了 NFS 服务 器，这也可能会造成数据丢失。 </li>
<li>no_wdelay： 这个选项关闭写延时。如果设置了 async，那么 NFS 就会忽略这个选项。 </li>
<li>nohide： 如果将一个目录挂载到另外一个目录之上，那么原来的目录通常就被隐藏起来或看起来 像空的一样。要禁用这种行为，需启用 hide 选项。 </li>
<li>no_subtree_check： 这个选项关闭子树检查，子树检查会执行一些不想忽略的安全性检查。缺省 选项是启用子树检查。 </li>
<li>no_auth_nlm： 这个选项也可以作为 insecure_locks 指定，它告诉 NFS 守护进程不要对加锁请求 进行认证。如果关心安全性问题，就要避免使用这个选项。缺省选项是 auth_nlm 或 secure_locks。 </li>
<li>mp (mountpoint=path)： 通过显式地声明这个选项，NFS 要求挂载所导出的目录。 </li>
<li>fsid=num： 这个选项通常都在 NFS 故障恢复的情况中使用。如果希望实现 NFS 的故障恢复，请 参考 NFS 文档。</li>
</ul>
<h4 id="NFS-用户映射的选项"><a href="#NFS-用户映射的选项" class="headerlink" title="NFS 用户映射的选项"></a>NFS 用户映射的选项</h4><ul>
<li>在使用 NFS 挂载的文件系统上的文件时，用户的访问通常都会受到限制，这就是说用户都是以匿 名用户的身份来对文件进行访问的，这些用户缺省情况下对这些文件只有只读权限。如果用户希望 以 root 用户或锁定义的其他用户身份访问远程文件系统上的文件，NFS 允许指定访问远程文件的 用户——通过用户标识号（UID）和组标识号（GID）进行用户映射。 </li>
<li>root_squash： 这个选项不允许 root 用户访问挂载上来的 NFS 卷。 </li>
<li>no_root_squash： 这个选项允许 root 用户访问挂载上来的 NFS 卷。 </li>
<li>all_squash： 这个选项对于公共访问的 NFS 卷来说非常有用，它会限制所有的 UID 和 GID，只使 用匿名用户。缺省设置是 no_all_squash。 anonuid 和 </li>
<li>anongid： 这两个选项将匿名 UID 和 GID 修改成特定用户和组帐号。</li>
</ul>
<h4 id="设置-NFS-服务开机启动"><a href="#设置-NFS-服务开机启动" class="headerlink" title="设置 NFS 服务开机启动"></a>设置 NFS 服务开机启动</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable rpcbind.service</span><br><span class="line">systemctl enable nfs-server.service</span><br><span class="line">systemctl start rpcbind.service</span><br><span class="line">systemctl start nfs-server.service</span><br></pre></td></tr></table></figure>
<h4 id="确认-NFS-服务器启动"><a href="#确认-NFS-服务器启动" class="headerlink" title="确认 NFS 服务器启动"></a>确认 NFS 服务器启动</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exportfs -v</span><br></pre></td></tr></table></figure>
<ul>
<li>rpcinfo -p：检查 NFS 服务器是否挂载我们想共享的目录 /data：</li>
<li>exportfs -r： 使配置生效</li>
</ul>
<h3 id="挂载端安装-NFS-客户端"><a href="#挂载端安装-NFS-客户端" class="headerlink" title="挂载端安装 NFS 客户端"></a>挂载端安装 NFS 客户端</h3><h4 id="安装-NFS-软件包"><a href="#安装-NFS-软件包" class="headerlink" title="安装 NFS 软件包"></a>安装 NFS 软件包</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install nfs-utils</span><br></pre></td></tr></table></figure>
<h4 id="设置-rpcbind-开机启动"><a href="#设置-rpcbind-开机启动" class="headerlink" title="设置 rpcbind 开机启动"></a>设置 rpcbind 开机启动</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable rpcbind.service</span><br></pre></td></tr></table></figure>
<h4 id="启动-rpcbind-服务"><a href="#启动-rpcbind-服务" class="headerlink" title="启动 rpcbind 服务"></a>启动 rpcbind 服务</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start rpcbind.service</span><br></pre></td></tr></table></figure>
<ul>
<li>注意：客户端不需要启动 nfs 服务</li>
</ul>
<h4 id="查看-NFS-服务端共享"><a href="#查看-NFS-服务端共享" class="headerlink" title="查看 NFS 服务端共享"></a>查看 NFS 服务端共享</h4><p>检查 NFS 服务器端是否有目录共享：showmount -e nfs服务器IP/nfs服务器主机名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">showmount -e nas</span><br></pre></td></tr></table></figure>
<h4 id="挂在使用-NFS-存储"><a href="#挂在使用-NFS-存储" class="headerlink" title="挂在使用 NFS 存储"></a>挂在使用 NFS 存储</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mkdir /data	#手动挂载</span><br><span class="line">mount -t nfs nas:/data /data</span><br><span class="line">umount /data</span><br><span class="line">vim /etc/fstab	#开机自动挂载</span><br><span class="line">mount -a</span><br><span class="line">df	#查看挂载</span><br></pre></td></tr></table></figure>
<ul>
<li><p>如果服务器端修改了 NFS 的配置，而又不想重启 NFS 服务（因为有客户端正在使用）可以使用 exportfs 命令重新载入 NFS 配置。 </p>
</li>
<li><p>export -ar: 重新导出所有的文件系统 </p>
</li>
<li>export -au: 关闭导出的所有文件系统 </li>
<li>export -u FS: 关闭指定的导出的文件系</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpcinfo -p #查看 RPC 服务列表</span><br></pre></td></tr></table></figure>
<h1 id="网站服务"><a href="#网站服务" class="headerlink" title="网站服务"></a>网站服务</h1><h2 id="Apache-静态站点"><a href="#Apache-静态站点" class="headerlink" title="Apache 静态站点"></a>Apache 静态站点</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum -y install httpd</span><br><span class="line">[root@localhost ~]# systemctl start httpd</span><br><span class="line">[root@localhost ~]# systemctl status  httpd</span><br><span class="line">[root@localhost ~]# systemctl enable httpd</span><br><span class="line">[root@localhost ~]# systemctl stop  firewalld</span><br><span class="line">[root@localhost ~]# setenforce 0</span><br><span class="line">[root@localhost ~]# systemctl   stop   firewalld</span><br><span class="line">[root@localhost ~]# httpd -v</span><br></pre></td></tr></table></figure>
<h2 id="LAMP-动态站点"><a href="#LAMP-动态站点" class="headerlink" title="LAMP 动态站点"></a>LAMP 动态站点</h2><h3 id="部署论坛系统discuz"><a href="#部署论坛系统discuz" class="headerlink" title="部署论坛系统discuz"></a>部署论坛系统discuz</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#永久关闭selinux</span><br><span class="line">[root@apache ~]# sed -ri &#x27;/^SELINUX=/cSELINUX=disabled&#x27; /etc/selinux/config </span><br><span class="line">临时关闭selinux</span><br><span class="line">[root@apache ~]# setenforce 0</span><br><span class="line">[root@apache ~]# systemctl stop firewalld.service </span><br><span class="line">[root@apache ~]# systemctl disable firewalld.service</span><br><span class="line">#安装LAMP</span><br><span class="line">[root@apache ~]# yum -y install httpd mariadb-server mariadb php php-mysql gd php-gd</span><br><span class="line">[root@apache ~]# systemctl start httpd mariadb</span><br><span class="line">[root@apache ~]# systemctl enable httpd mariadb</span><br><span class="line">#安装discuz</span><br><span class="line">##导入discuz网站源码</span><br><span class="line">wget http://download.comsenz.com/DiscuzX/2.5/Discuz_X2.5_SC_UTF8.zip</span><br><span class="line">[root@apache ~]# mkdir    -p      /webroot/discuz</span><br><span class="line">[root@apache ~]# yum  install  -y   unzip</span><br><span class="line">[root@apache ~]#unzip  Discuz_X2.5_SC_UTF8.zip</span><br><span class="line">[root@apache ~]#cp -rf upload/* /webroot/discuz/</span><br><span class="line">[root@apache ~]#chown -R  apache.apache  /webroot/discuz/</span><br><span class="line"># Apache 配置虚拟主机</span><br><span class="line">[root@apache ~]# vim /etc/httpd/conf.d/discuz.conf</span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">   ServerName www.discuz.com</span><br><span class="line">   DocumentRoot /webroot/discuz</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;Directory &quot;/webroot/discuz&quot;&gt;</span><br><span class="line">   Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line">[root@apache ~]# systemctl restart httpd</span><br><span class="line">#准备数据库</span><br><span class="line">[root@localhost discuz]# mysql</span><br><span class="line">MariaDB [(none)]&gt; create database discuz ;</span><br></pre></td></tr></table></figure>
<h1 id="域名服务"><a href="#域名服务" class="headerlink" title="域名服务"></a>域名服务</h1><p>hosts文件：实现名字解析，主要为本地主机名，集群节点提供快速解析。缺点是不便于查询，更新。</p>
<p>DNS：（Domain Name System，域名系统）实现名字解析（例如将主机名解析为IP），分布式，层次性。</p>
<p>FQDN：(Fully Qualified Domain Name)完全合格域名/全称域名。</p>
<p>主机名.四级域.三级域.二级域.顶级域.（根域）</p>
<p>命名空间：</p>
<p><img src="https://gitee.com/Bluetom/img2/raw/master/img20230403/202310152106870.png" alt="image-20231015210632640"></p>
<h2 id="DNS解析流程"><a href="#DNS解析流程" class="headerlink" title="DNS解析流程"></a>DNS解析流程</h2><p>例如客户端解析 www.126.com</p>
<ol>
<li><p>客户端查询自己的缓存（包含hosts中的记录），如果没有将查询发送/etc/resolv.conf中的DNS服务器</p>
</li>
<li><p>如果本地DNS服务器对于请求的信息具有权威性，会将（权威答案）发送到客户端。</p>
</li>
<li><p>否则（不具有权威性），如果DNS服务器在其缓存中有请求信息，则将（非权威答案）发送到客户端 </p>
</li>
<li><p>如果缓存中没有该查询信息，DNS服务器将搜索权威DNS服务器以查找信息：<br>a. 从根区域开始，按照DNS层次结构向下搜索，直至对于信息具有权威的名称服务器，为客户端获答案<br>DNS服务器将信息传递给客户端 ，并在自己的缓存中保留一个副本，以备以后查找。<br>b. 转发到其它DNS服务器</p>
</li>
</ol>
<p>正向解析/反向解析：</p>
<p>DNS服务主要起到两个作用：</p>
<p>　　1）可以把相对应的域名解析为对应的IP地址，这叫正向解析。</p>
<p>　　2）可以把相对应的IP地址解析为对应的域名，这叫反向解析。（反垃圾邮件）</p>
<h1 id="远程管理"><a href="#远程管理" class="headerlink" title="远程管理"></a>远程管理</h1><h2 id="ssh服务"><a href="#ssh服务" class="headerlink" title="ssh服务"></a>ssh服务</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">安装软件：</span><br><span class="line">    openssh-server 提供服务</span><br><span class="line">    openssh-clients 客户端</span><br><span class="line">    openssh</span><br><span class="line">    [root@localhost ~]# yum install openssh* -y</span><br><span class="line">ssh 端口22</span><br><span class="line">服务器端：</span><br><span class="line">	启动服务：</span><br><span class="line">	[root@localhost ~]# systemctl start sshd</span><br><span class="line">    查看：</span><br><span class="line">    [root@localhost ~]# lsof -i:22</span><br><span class="line">    关闭防火墙和selinux</span><br><span class="line">客户端：</span><br><span class="line">    远程登陆管理：</span><br><span class="line">    [root@localhost ~]# ssh -X tom@10.18.44.208 -p 2222</span><br><span class="line">    [root@localhost ~]# ssh 10.18.44.208</span><br><span class="line">    如登陆果账户没有密码，默认不能</span><br><span class="line">无密码登陆(ssh密钥认证)</span><br><span class="line">client:</span><br><span class="line">    产生公钥和私钥：</span><br><span class="line">    [root@localhost ~]# ssh-keygen //一路回车</span><br><span class="line">    拷贝公钥给对方：</span><br><span class="line">    [root@localhost ~]# ssh-copy-id -i 10.18.44.208</span><br><span class="line">直接执行远程命令：</span><br><span class="line">	[root@localhost ~]# ssh 10.18.44.208 &quot;reboot&quot;</span><br><span class="line">远程拷贝：</span><br><span class="line">    需要先安装客户端</span><br><span class="line">    [root@localhost ~]# cp 源文件 目标路径</span><br><span class="line">    谁是远程谁加IP</span><br><span class="line">    [root@localhost ~]# scp /a.txt 192.168.2.108:/</span><br><span class="line">    [root@localhost ~]# scp 192.168.2.108:/a.txt ./</span><br><span class="line">    -P端口</span><br><span class="line">    拷贝目录加-r选项</span><br><span class="line">    [root@localhost ~]# scp 192.168.2.108:/a.txt 192.168.2.109:/</span><br><span class="line">修改端口号</span><br><span class="line">    [root@localhost ~]# vim /etc/ssh/sshd_config</span><br><span class="line">    Port 22</span><br><span class="line">    ListenAddress 192.168.2.8</span><br><span class="line">    PermitRootLogin yes</span><br><span class="line">    MaxSessions 10 最大并发量</span><br><span class="line">    PermitEmptyPasswords no</span><br></pre></td></tr></table></figure>
<h2 id="rz-sz命令"><a href="#rz-sz命令" class="headerlink" title="rz sz命令"></a>rz sz命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">安装</span><br><span class="line">root 账号登陆后执行以下命令：</span><br><span class="line">[root@localhost ~]#yum install -y lrzsz</span><br><span class="line">使用</span><br><span class="line">sz命令发送文件到本地：</span><br><span class="line">[root@localhost ~]# sz filename</span><br><span class="line">rz命令本地上传文件到服务器：</span><br><span class="line">[root@localhost ~]# rz</span><br><span class="line">执行该命令后，在弹出框中选择要上传的文件即可。</span><br></pre></td></tr></table></figure>
<h1 id="文件服务器"><a href="#文件服务器" class="headerlink" title="文件服务器"></a>文件服务器</h1><h2 id="Ftp-介绍-1"><a href="#Ftp-介绍-1" class="headerlink" title="Ftp 介绍"></a>Ftp 介绍</h2><p>文件传输协议（File Transfer Protocol，FTP），基于该协议FTP客户端与服务端可以实现共享文件、上传文件、下载文件。 FTP 基于TCP协议生成一个虚拟的连接，主要用于控制FTP连接信息，</p>
<p>同时再生成一个单独的TCP连接用于FTP数据传输。用户可以通过客户端向FTP服务器端上传、下载、删除文件，FTP服务器端可以同时提供给多人共享使用。</p>
<p>FTP服务是Client/Server（简称C/S）模式，基于FTP协议实现FTP文件对外共享及传输的软件称之为FTP服务器源端，客户端程序基于FTP协议，则称之为FTP客户端，FTP客户端可以向FTP服务器上传、下载文件。</p>
<p>目前主流的FTP服务器端软件包括：Vsftpd、ProFTPD、PureFTPd、Wuftpd、Server-U FTP、FileZilla Server等软件，其中Unix/Linux使用较为广泛的FTP服务器端软件为Vsftpd 。</p>
<h2 id="Ftp-传输模式介绍-1"><a href="#Ftp-传输模式介绍-1" class="headerlink" title="Ftp 传输模式介绍"></a><strong>Ftp</strong> <strong>传输模式介绍</strong></h2><p>FTP基于C/S模式，FTP客户端与服务器端有两种传输模式，分别是FTP主动模式、FTP被动模式，主被动模式均是以FTP服务器端为参照。</p>
<p>FTP主动模式：客户端从一个任意的端口N（N&gt;1024）连接到FTP服务器的port 21命令端口，客户端开始监听端口N+1，并发送FTP命令“port N+1”到FTP服务器，FTP服务器以数据端口（20）连接到客户端指定的数据端口（N+1）。</p>
<p>FTP被动模式：客户端从一个任意的端口N（N&gt;1024）连接到FTP服务器的port 21命令端口，客户端开始监听端口N+1，客户端提交 PASV命令，服务器会开启一个任意的端口（P &gt;1024），并发送PORT P命令给客户端。客户端发起从本地端口N+1到服务器的端口P的连接用来传送数据。</p>
<p>企业实际环境中，如果FTP客户端与FTP服务端均开放防火墙，FTP需以主动模式工作，这样只需要在FTP服务器端防火墙规则中，开放20、21端口即可。</p>
<h2 id="Vsftp-服务器简介-1"><a href="#Vsftp-服务器简介-1" class="headerlink" title="Vsftp 服务器简介"></a><strong>Vsftp</strong> <strong>服务器简介</strong></h2><p>非常安全的FTP服务进程（Very Secure FTP daemon，Vsftpd），Vsftpd在Unix/Linux发行版中最主流的FTP服务器程序，优点小巧轻快，安全易用、稳定高效、满足企业跨部门、多用户的使用（1000用户）等。</p>
<p>Vsftpd基于GPL开源协议发布，在中小企业中得到广泛的应用，Vsftpd可以快速上手，基于Vsftpd虚拟用户方式，访问验证更加安全。Vsftpd还可以基于MYSQL数据库做安全验证，多重安全防护。</p>
<h2 id="Vsftp-的登陆类型-1"><a href="#Vsftp-的登陆类型-1" class="headerlink" title="Vsftp 的登陆类型"></a><strong>Vsftp</strong> <strong>的登陆类型</strong></h2><p>VSFTP提供了系统用户、匿名用户、和虚拟用户三种不同的登陆方式。所有的虚拟用户会映射成一个系统用户，访问时的文件目录是为此系统用户的家目录；匿名用户也是虚拟用户，映射的系统用户为ftp，详细信息可以通过man vsftpd.conf查看</p>
<h2 id="Vsftp-安装配置-1"><a href="#Vsftp-安装配置-1" class="headerlink" title="Vsftp 安装配置"></a><strong>Vsftp</strong> <strong>安装配置</strong></h2><h3 id="安装-epel-源"><a href="#安装-epel-源" class="headerlink" title="安装 epel 源"></a><strong>安装</strong> <strong>epel</strong> <strong>源</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install epel-release.noarch</span><br></pre></td></tr></table></figure>
<h3 id="安装-vsftpd-及相关依赖"><a href="#安装-vsftpd-及相关依赖" class="headerlink" title="安装 vsftpd 及相关依赖"></a><strong>安装</strong> <strong>vsftpd</strong> <strong>及相关依赖</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install vsftpd* pam* db4*</span><br></pre></td></tr></table></figure>
<ul>
<li>vsftpd： ftp软件 </li>
<li>pam：认证模块 </li>
<li>DB4：支持文件数据库</li>
</ul>
<h3 id="vsftpd-配置文件说明-1"><a href="#vsftpd-配置文件说明-1" class="headerlink" title="vsftpd 配置文件说明"></a><strong>vsftpd</strong> <strong>配置文件说明</strong></h3></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://ktzxy.github.io">蓝桉</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://ktzxy.github.io/posts/e511c25d.html">https://ktzxy.github.io/posts/e511c25d.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://ktzxy.github.io" target="_blank">蓝桉`Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a></div><div class="post-share"><div class="social-share" data-image="/bg/Image00010.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><link rel="stylesheet" href="/css/coin/coin.css" media="defer" onload="this.media='all'"/><div class="post-reward"><button class="tip-button reward-button"><span class="tip-button__text">不给糖果就捣蛋</span><div class="coin-wrapper"><div class="coin"><div class="coin__middle"></div><div class="coin__back"></div><div class="coin__front"></div></div></div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.webp" target="_blank"><img class="post-qr-code-img" src="/img/wechat.webp" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.webp" target="_blank"><img class="post-qr-code-img" src="/img/alipay.webp" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></button></div><audio id="coinAudio" src="https://cdn.cbd.int/akilar-candyassets@1.0.36/audio/aowu.m4a"></audio><script defer="defer" src="/js/coin/coin.js"></script><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/2c5abc07.html" title="Windows"><img class="cover" src="/bg/Image00017.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Windows</div></div><div class="info-2"><div class="info-item-1">1. 常用 DOS 命令 d: 回车 盘符切换 dir(directory):列出当前目录下的文件以及文件夹 cd (change directory)改变指定目录(进入指定目录) 进入 cd 目录；cd 多级目录\多级目录 2 ​ 回退 cd.. ；cd\   cls : (clear screen)清屏 exit : 退出 dos 命令行 ipconfig ：查询 IP 的命令 ipconfig /release ：释放本机现有 IP ipconfig /renew ：向 DHCP 服务器（可以简单理解成你家的路由器）重新申领一个 IP ipconfig /all ：显示完整版 IP 信息   telnet ：测试映射端口或远程访问主机 telnet towel.blinkenlights.nl：播放 ASCII 版《星球大战》  注：这项功能需要 telnet 支持，telnet 不是 Windows 的默认内置组件，因此当你看到错误提示时，需要首先进入“设置” —&gt; “应用” —&gt; “程序和功能” —&gt; “启用或关闭 Windows 功能”手工安装它（T...</div></div></div></a><a class="pagination-related" href="/posts/6782be63.html" title="Docker学习"><img class="cover" src="/bg/Image00007.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Docker学习</div></div><div class="info-2"><div class="info-item-1">Docker安装安装Docker 查看Linux版本内核  123451.查看Linux版本内核$uname -aDocker最低支持CentOS 7，Docker 需要安装在 64 位的平台，并且内核版本不低于 3.10。 CentOS 7 满足最低内核的要求，但由于内核版本比较低，部分功能（如 overlay2 存储层驱动）无法使用，并且部分功能可能不太稳定。2.yum安装gcc相关环境（确保虚拟机可以上外网）$yum -y install gcc  安装  12345678910111213141516171819202122232425261.卸载旧的版本$sudo yum remove docker \                  docker-client \                  docker-client-latest \                  docker-common \                  docker-latest \                  docker-latest-logrotate \     ...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avatar.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">蓝桉</div><div class="author-info-description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这有关于<b style="color:#fff">生活、学习、技术</b>相关的问题和看法，还有<b style="color:#fff">文章教程</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">264</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">38</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">37</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/ktzxy"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon faa-parent animated-hover" href="https://github.com/ktzxy" target="_blank" title="Github"><svg class="social_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-github"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=2251511764@qq.com" target="_blank" title="Email"><svg class="social_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-youxiang"></use></svg></a><a class="social-icon faa-parent animated-hover" href="/atom.xml" target="_blank" title="RSS"><svg class="social_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-RSS"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/496148176" target="_blank" title="BiliBili"><svg class="social_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-QX-BILIBILI"></use></svg></a><a class="social-icon faa-parent animated-hover" href="tencent://Message/?Uin=2251511764&amp;amp;websiteName=local.edu.com:8888=&amp;amp;Menu=yes" target="_blank" title="QQ"><svg class="social_icon faa-tada" aria-hidden="true"><use xlink:href="#icon-QQ"></use></svg></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%B8%8E%E4%B8%8B%E8%BD%BD"><span class="toc-number">2.</span> <span class="toc-text">安装与下载</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">3.</span> <span class="toc-text">目录结构</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">4.</span> <span class="toc-text">常用命令</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B7%AF%E5%BE%84"><span class="toc-number">5.</span> <span class="toc-text">路径</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E7%BD%91%E5%9D%80"><span class="toc-number">6.</span> <span class="toc-text">学习网址</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86"><span class="toc-number">7.</span> <span class="toc-text">文件管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6"><span class="toc-number">7.1.</span> <span class="toc-text">创建文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95"><span class="toc-number">7.2.</span> <span class="toc-text">创建目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6"><span class="toc-number">7.3.</span> <span class="toc-text">复制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A7%BB%E5%8A%A8"><span class="toc-number">7.4.</span> <span class="toc-text">移动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4"><span class="toc-number">7.5.</span> <span class="toc-text">删除</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B"><span class="toc-number">7.6.</span> <span class="toc-text">查看</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9"><span class="toc-number">7.7.</span> <span class="toc-text">修改</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B"><span class="toc-number">7.8.</span> <span class="toc-text">文件类型</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E4%B8%8E%E7%94%A8%E6%88%B7%E7%BB%84"><span class="toc-number">8.</span> <span class="toc-text">用户与用户组</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-number">8.1.</span> <span class="toc-text">用户管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%86"><span class="toc-number">8.2.</span> <span class="toc-text">用户组管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E5%88%87%E6%8D%A2"><span class="toc-number">8.3.</span> <span class="toc-text">用户切换</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%9A%84%E6%9D%83%E9%99%90"><span class="toc-number">9.</span> <span class="toc-text">用户的权限</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%9D%83%E9%99%90UGO"><span class="toc-number">9.1.</span> <span class="toc-text">基本权限UGO</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%9D%83%E9%99%90ACL"><span class="toc-number">9.2.</span> <span class="toc-text">基本权限ACL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="toc-number">9.3.</span> <span class="toc-text">特殊权限（了解）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86"><span class="toc-number">10.</span> <span class="toc-text">进程管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81"><span class="toc-number">10.1.</span> <span class="toc-text">进程状态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86-1"><span class="toc-number">10.2.</span> <span class="toc-text">进程管理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AE%A1%E9%81%93%E5%92%8C%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">11.</span> <span class="toc-text">管道和重定向</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91%E5%92%8C%E7%AE%A1%E9%81%93%E7%AC%A6"><span class="toc-number">11.1.</span> <span class="toc-text">重定向和管道符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">11.2.</span> <span class="toc-text">输出重定向</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E9%87%8D%E5%AE%9A%E5%90%91%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6"><span class="toc-number">11.3.</span> <span class="toc-text">输入重定向发送邮件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%A1%E9%81%93%E7%AC%A6"><span class="toc-number">11.4.</span> <span class="toc-text">管道符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%AE%A1%E9%81%93"><span class="toc-number">11.4.1.</span> <span class="toc-text">进程管道</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tee%E7%AE%A1%E9%81%93"><span class="toc-number">11.4.2.</span> <span class="toc-text">tee管道</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92Xargs"><span class="toc-number">11.4.3.</span> <span class="toc-text">参数传递Xargs</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86"><span class="toc-number">12.</span> <span class="toc-text">磁盘管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86"><span class="toc-number">12.1.</span> <span class="toc-text">存储管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%A1%E7%90%86%E7%A3%81%E7%9B%98"><span class="toc-number">12.2.</span> <span class="toc-text">管理磁盘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E5%88%86%E5%8C%BA%E7%AE%A1%E7%90%86Swap"><span class="toc-number">12.3.</span> <span class="toc-text">交换分区管理Swap</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-number">12.4.</span> <span class="toc-text">文件系统</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E9%93%BE%E6%8E%A5"><span class="toc-number">12.5.</span> <span class="toc-text">文件链接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%A6%E5%8F%B7%E9%93%BE%E6%8E%A5"><span class="toc-number">12.5.1.</span> <span class="toc-text">符号链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A1%AC%E9%93%BE%E6%8E%A5-%E5%8F%AF%E4%BB%A5%E7%90%86%E8%A7%A3%E4%B8%BA%E6%96%87%E4%BB%B6%E5%A4%87%E4%BB%BD"><span class="toc-number">12.5.2.</span> <span class="toc-text">硬链接(可以理解为文件备份)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RAID%E7%A3%81%E7%9B%98%E5%88%97%E9%98%B5-%E4%BA%86%E8%A7%A3"><span class="toc-number">12.6.</span> <span class="toc-text">RAID磁盘列阵(了解)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E5%92%8C%E5%8E%8B%E7%BC%A9"><span class="toc-number">13.</span> <span class="toc-text">查找和压缩</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%9F%A5%E6%89%BE"><span class="toc-number">13.1.</span> <span class="toc-text">文件查找</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%89%93%E5%8C%85%E5%8F%8A%E5%8E%8B%E7%BC%A9"><span class="toc-number">14.</span> <span class="toc-text">文件打包及压缩</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%93%E5%8C%85"><span class="toc-number">14.1.</span> <span class="toc-text">打包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%8B%E7%BC%A9%E5%92%8C%E8%A7%A3%E5%8E%8B"><span class="toc-number">14.2.</span> <span class="toc-text">压缩和解压</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86"><span class="toc-number">15.</span> <span class="toc-text">软件包管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#RPM%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86"><span class="toc-number">15.1.</span> <span class="toc-text">RPM软件包管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#YUM%E5%B7%A5%E5%85%B7"><span class="toc-number">15.2.</span> <span class="toc-text">YUM工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%9C%AC%E5%9C%B0YUM%E6%BA%90"><span class="toc-number">15.2.1.</span> <span class="toc-text">配置本地YUM源</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%BA%90%E7%A0%81%E5%8C%85%E7%AE%A1%E7%90%86"><span class="toc-number">15.3.</span> <span class="toc-text">源码包管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%BA%90%E7%A0%81%E5%8C%85"><span class="toc-number">15.3.0.1.</span> <span class="toc-text">获取源码包</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1%E8%AE%A1%E5%88%92"><span class="toc-number">16.</span> <span class="toc-text">任务计划</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E6%AC%A1%E6%80%A7%E8%B0%83%E5%BA%A6%E6%89%A7%E8%A1%8C-at"><span class="toc-number">16.1.</span> <span class="toc-text">一次性调度执行 at</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E8%B0%83%E5%BA%A6%E6%89%A7%E8%A1%8Ccron"><span class="toc-number">16.2.</span> <span class="toc-text">循环调度执行cron</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86"><span class="toc-number">17.</span> <span class="toc-text">日志管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1"><span class="toc-number">17.1.</span> <span class="toc-text">路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%97"><span class="toc-number">17.2.</span> <span class="toc-text">常见系统日志</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E7%B1%BB%E5%9E%8B"><span class="toc-number">17.3.</span> <span class="toc-text">日志类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-number">17.4.</span> <span class="toc-text">日志的优先级</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%97%A5%E5%BF%97"><span class="toc-number">17.5.</span> <span class="toc-text">自定义日志</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E8%BF%9B%E7%A8%8Brsyslog"><span class="toc-number">17.6.</span> <span class="toc-text">日志进程rsyslog</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rsyslog%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">17.7.</span> <span class="toc-text">rsyslog配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E8%BD%AE%E8%BD%AClogrotate"><span class="toc-number">17.8.</span> <span class="toc-text">日志轮转logrotate</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E5%AE%89%E5%85%A8"><span class="toc-number">17.9.</span> <span class="toc-text">日志安全</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86"><span class="toc-number">18.</span> <span class="toc-text">网络管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ip%E5%9C%B0%E5%9D%80%E7%9A%84%E5%88%92%E5%88%86"><span class="toc-number">18.1.</span> <span class="toc-text">ip地址的划分</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81"><span class="toc-number">18.2.</span> <span class="toc-text">子网掩码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E5%90%8D%E7%A7%B0%E8%A7%84%E5%88%99"><span class="toc-number">18.3.</span> <span class="toc-text">网络接口名称规则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7"><span class="toc-number">18.4.</span> <span class="toc-text">网络测试工具</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1"><span class="toc-number">19.</span> <span class="toc-text">文件服务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Ftp-%E4%BB%8B%E7%BB%8D"><span class="toc-number">19.1.</span> <span class="toc-text">Ftp 介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ftp-%E4%BC%A0%E8%BE%93%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D"><span class="toc-number">19.2.</span> <span class="toc-text">Ftp 传输模式介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vsftp-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%80%E4%BB%8B"><span class="toc-number">19.3.</span> <span class="toc-text">Vsftp 服务器简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vsftp-%E7%9A%84%E7%99%BB%E9%99%86%E7%B1%BB%E5%9E%8B"><span class="toc-number">19.4.</span> <span class="toc-text">Vsftp 的登陆类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vsftp-%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE"><span class="toc-number">19.5.</span> <span class="toc-text">Vsftp 安装配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vsftpd-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%B4%E6%98%8E"><span class="toc-number">19.5.1.</span> <span class="toc-text">vsftpd 配置文件说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vsftpd-%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E5%89%8D%E5%A4%87%E4%BB%BD%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">19.5.2.</span> <span class="toc-text">vsftpd 修改配置前备份配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vsftpd-%E9%85%8D%E7%BD%AE%E5%8C%BF%E5%90%8D%E7%94%A8%E6%88%B7"><span class="toc-number">19.5.3.</span> <span class="toc-text">vsftpd 配置匿名用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vsftp-%E9%85%8D%E7%BD%AE%E6%9C%AC%E5%9C%B0%EF%BC%88%E7%B3%BB%E7%BB%9F%EF%BC%89%E7%94%A8%E6%88%B7"><span class="toc-number">19.5.4.</span> <span class="toc-text">vsftp 配置本地（系统）用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vsftp-%E9%85%8D%E7%BD%AE%E8%99%9A%E6%8B%9F%E7%94%A8%E6%88%B7"><span class="toc-number">19.5.5.</span> <span class="toc-text">vsftp 配置虚拟用户</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ftp-%E5%AE%A2%E6%88%B7%E7%AB%AF-lftp"><span class="toc-number">19.6.</span> <span class="toc-text">Ftp 客户端 lftp</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#lftp-%E4%BB%8B%E7%BB%8D"><span class="toc-number">19.6.1.</span> <span class="toc-text">lftp 介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lftp-%E8%AF%AD%E6%B3%95"><span class="toc-number">19.6.2.</span> <span class="toc-text">lftp 语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lftp-%E9%80%89%E9%A1%B9"><span class="toc-number">19.6.3.</span> <span class="toc-text">lftp 选项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lftp-%E5%8F%82%E6%95%B0"><span class="toc-number">19.6.4.</span> <span class="toc-text">lftp 参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lftp-%E4%BD%BF%E7%94%A8%E5%AE%9E%E4%BE%8B"><span class="toc-number">19.6.5.</span> <span class="toc-text">lftp 使用实例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%99%BB%E5%BD%95ftp"><span class="toc-number">19.6.5.1.</span> <span class="toc-text">登录ftp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%96%87%E4%BB%B6%E4%B8%8E%E6%94%B9%E5%8F%98%E7%9B%AE%E5%BD%95"><span class="toc-number">19.6.5.2.</span> <span class="toc-text">查看文件与改变目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD"><span class="toc-number">19.6.5.3.</span> <span class="toc-text">下载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0"><span class="toc-number">19.6.5.4.</span> <span class="toc-text">上传</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E8%AE%BE%E7%BD%AE"><span class="toc-number">19.6.5.5.</span> <span class="toc-text">模式设置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B9%A6%E7%AD%BE"><span class="toc-number">19.6.5.6.</span> <span class="toc-text">书签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">19.6.5.7.</span> <span class="toc-text">配置文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NAS-%E5%AD%98%E5%82%A8"><span class="toc-number">19.7.</span> <span class="toc-text">NAS 存储</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#NAS-%E4%BB%8B%E7%BB%8D"><span class="toc-number">19.7.1.</span> <span class="toc-text">NAS 介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SAN-%E4%BB%8B%E7%BB%8D"><span class="toc-number">19.7.2.</span> <span class="toc-text">SAN 介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NAS-%E4%B8%8E-SAN-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">19.7.3.</span> <span class="toc-text">NAS 与 SAN 的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NAS-%E5%92%8C-SAN-%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B"><span class="toc-number">19.7.4.</span> <span class="toc-text">NAS 和 SAN 使用案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#NAS%EF%BC%9A%E5%BD%93%E9%9C%80%E8%A6%81%E6%95%B4%E5%90%88%E3%80%81%E9%9B%86%E4%B8%AD%E5%92%8C%E5%85%B1%E4%BA%AB%E6%97%B6"><span class="toc-number">19.7.4.1.</span> <span class="toc-text">NAS：当需要整合、集中和共享时</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SAN%EF%BC%9A%E5%BD%93%E9%9C%80%E8%A6%81%E5%8A%A0%E9%80%9F%EF%BC%8C%E6%89%A9%E5%B1%95%E5%92%8C%E4%BF%9D%E6%8A%A4%E6%97%B6"><span class="toc-number">19.7.4.2.</span> <span class="toc-text">SAN：当需要加速，扩展和保护时</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NFS-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%92%8C-samba-%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BB%8B%E7%BB%8D"><span class="toc-number">19.7.5.</span> <span class="toc-text">NFS 服务器和 samba 服务器介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#NFS-%E4%BB%8B%E7%BB%8D"><span class="toc-number">19.7.5.1.</span> <span class="toc-text">NFS 介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Samba-%E7%AE%80%E4%BB%8B"><span class="toc-number">19.7.5.2.</span> <span class="toc-text">Samba 简介</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE-NFS-%E6%9C%8D%E5%8A%A1"><span class="toc-number">19.7.6.</span> <span class="toc-text">安装配置 NFS 服务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0-hosts-%E8%A7%A3%E6%9E%90"><span class="toc-number">19.7.6.1.</span> <span class="toc-text">添加 hosts 解析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-NFS-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">19.7.6.2.</span> <span class="toc-text">安装 NFS 服务器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-NFS-%E5%AD%98%E5%82%A8%E7%9B%AE%E5%BD%95"><span class="toc-number">19.7.6.3.</span> <span class="toc-text">创建 NFS 存储目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-NFS-%E6%9C%8D%E5%8A%A1"><span class="toc-number">19.7.6.4.</span> <span class="toc-text">配置 NFS 服务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NFS-%E5%AE%9A%E5%88%B6%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E"><span class="toc-number">19.7.6.5.</span> <span class="toc-text">NFS 定制参数说明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NFS-%E7%94%A8%E6%88%B7%E6%98%A0%E5%B0%84%E7%9A%84%E9%80%89%E9%A1%B9"><span class="toc-number">19.7.6.6.</span> <span class="toc-text">NFS 用户映射的选项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE-NFS-%E6%9C%8D%E5%8A%A1%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8"><span class="toc-number">19.7.6.7.</span> <span class="toc-text">设置 NFS 服务开机启动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A1%AE%E8%AE%A4-NFS-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%AF%E5%8A%A8"><span class="toc-number">19.7.6.8.</span> <span class="toc-text">确认 NFS 服务器启动</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%82%E8%BD%BD%E7%AB%AF%E5%AE%89%E8%A3%85-NFS-%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-number">19.7.7.</span> <span class="toc-text">挂载端安装 NFS 客户端</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-NFS-%E8%BD%AF%E4%BB%B6%E5%8C%85"><span class="toc-number">19.7.7.1.</span> <span class="toc-text">安装 NFS 软件包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE-rpcbind-%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8"><span class="toc-number">19.7.7.2.</span> <span class="toc-text">设置 rpcbind 开机启动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8-rpcbind-%E6%9C%8D%E5%8A%A1"><span class="toc-number">19.7.7.3.</span> <span class="toc-text">启动 rpcbind 服务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B-NFS-%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%85%B1%E4%BA%AB"><span class="toc-number">19.7.7.4.</span> <span class="toc-text">查看 NFS 服务端共享</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%82%E5%9C%A8%E4%BD%BF%E7%94%A8-NFS-%E5%AD%98%E5%82%A8"><span class="toc-number">19.7.7.5.</span> <span class="toc-text">挂在使用 NFS 存储</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E7%AB%99%E6%9C%8D%E5%8A%A1"><span class="toc-number">20.</span> <span class="toc-text">网站服务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Apache-%E9%9D%99%E6%80%81%E7%AB%99%E7%82%B9"><span class="toc-number">20.1.</span> <span class="toc-text">Apache 静态站点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LAMP-%E5%8A%A8%E6%80%81%E7%AB%99%E7%82%B9"><span class="toc-number">20.2.</span> <span class="toc-text">LAMP 动态站点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2%E8%AE%BA%E5%9D%9B%E7%B3%BB%E7%BB%9Fdiscuz"><span class="toc-number">20.2.1.</span> <span class="toc-text">部署论坛系统discuz</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D%E6%9C%8D%E5%8A%A1"><span class="toc-number">21.</span> <span class="toc-text">域名服务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#DNS%E8%A7%A3%E6%9E%90%E6%B5%81%E7%A8%8B"><span class="toc-number">21.1.</span> <span class="toc-text">DNS解析流程</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%9C%E7%A8%8B%E7%AE%A1%E7%90%86"><span class="toc-number">22.</span> <span class="toc-text">远程管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ssh%E6%9C%8D%E5%8A%A1"><span class="toc-number">22.1.</span> <span class="toc-text">ssh服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rz-sz%E5%91%BD%E4%BB%A4"><span class="toc-number">22.2.</span> <span class="toc-text">rz sz命令</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">23.</span> <span class="toc-text">文件服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Ftp-%E4%BB%8B%E7%BB%8D-1"><span class="toc-number">23.1.</span> <span class="toc-text">Ftp 介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ftp-%E4%BC%A0%E8%BE%93%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D-1"><span class="toc-number">23.2.</span> <span class="toc-text">Ftp 传输模式介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vsftp-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%80%E4%BB%8B-1"><span class="toc-number">23.3.</span> <span class="toc-text">Vsftp 服务器简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vsftp-%E7%9A%84%E7%99%BB%E9%99%86%E7%B1%BB%E5%9E%8B-1"><span class="toc-number">23.4.</span> <span class="toc-text">Vsftp 的登陆类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vsftp-%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE-1"><span class="toc-number">23.5.</span> <span class="toc-text">Vsftp 安装配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-epel-%E6%BA%90"><span class="toc-number">23.5.1.</span> <span class="toc-text">安装 epel 源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-vsftpd-%E5%8F%8A%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96"><span class="toc-number">23.5.2.</span> <span class="toc-text">安装 vsftpd 及相关依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vsftpd-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%B4%E6%98%8E-1"><span class="toc-number">23.5.3.</span> <span class="toc-text">vsftpd 配置文件说明</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/a318ca1f.html" title="MySQL数据库150道高频面试题"><img src="/bg/Image00018.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL数据库150道高频面试题"/></a><div class="content"><a class="title" href="/posts/a318ca1f.html" title="MySQL数据库150道高频面试题">MySQL数据库150道高频面试题</a><time datetime="2025-07-09T17:28:46.000Z" title="发表于 2025-07-09 17:28:46">2025-07-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/8f9b37aa.html" title="技术同学必会的MySQL设计规约"><img src="/bg/Image00014.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="技术同学必会的MySQL设计规约"/></a><div class="content"><a class="title" href="/posts/8f9b37aa.html" title="技术同学必会的MySQL设计规约">技术同学必会的MySQL设计规约</a><time datetime="2025-07-09T17:28:46.000Z" title="发表于 2025-07-09 17:28:46">2025-07-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/dfdfdf4.html" title="数据库概述"><img src="/bg/Image00002.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数据库概述"/></a><div class="content"><a class="title" href="/posts/dfdfdf4.html" title="数据库概述">数据库概述</a><time datetime="2025-07-09T17:28:46.000Z" title="发表于 2025-07-09 17:28:46">2025-07-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/490575ab.html" title="24工厂模式俗话解释"><img src="/bg/Image00024.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="24工厂模式俗话解释"/></a><div class="content"><a class="title" href="/posts/490575ab.html" title="24工厂模式俗话解释">24工厂模式俗话解释</a><time datetime="2025-07-09T17:28:46.000Z" title="发表于 2025-07-09 17:28:46">2025-07-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/364ea8cc.html" title="设计模式"><img src="/bg/Image00014.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="设计模式"/></a><div class="content"><a class="title" href="/posts/364ea8cc.html" title="设计模式">设计模式</a><time datetime="2025-07-09T17:28:46.000Z" title="发表于 2025-07-09 17:28:46">2025-07-09</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;2020 - 2025 By 蓝桉</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.2</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><div class="aplayer no-destroy" data-id="8152976493" data-server="netease" data-type="playlist"   data-order="list" data-fixed="true" data-preload="auto" data-autoplay="false" data-mutex="true" ></div><script async src="//at.alicdn.com/t/c/font_4379924_273fk05h86zi.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css"  media="defer" onload="this.media='all'"><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script defer data-pjax src="/js/cat/cat.js"></script><script async data-pjax src="/js/meting/music_lanan.min.js"></script><script defer type="text/javascript" src="https://cdn1.tianli0.top/npm/sweetalert2@8.19.0/dist/sweetalert2.all.js"></script><script defer src="/js/day/lunar.js"></script><script defer src="/js/day/day.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_clock_anzhiyu_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock_anzhiyu')
    if(parent_div_git) {
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var qweather_key = '10a7db1c41b6489db9c830c668a18304';
  var gaud_map_key = '82a64bc994fb6494830f157f319f9f69';
  var baidu_ak_key = 'undefined';
  var flag = 0;
  var clock_rectangle = '113.34532,23.15624';
  var clock_default_rectangle_enable = 'false';

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_anzhiyu_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_anzhiyu_injector_config();
  }
  </script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title=""><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly_v4.2.2" title=""><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://www.jsdelivr.com/" style="margin-inline:5px" data-title="本站使用JsDelivr为静态资源提供CDN加速" title=""><img src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&amp;logo=jsDelivr" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title=""><img src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title=""><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></p>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="/js/runtime/runtime.min.js"></script><script async src="/js/font/ali_font_all.js"></script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '1.5s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('flink-list-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__flipInY');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('flink-list-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__animated');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('article-sort-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__slideInRight');
    arr[i].setAttribute('data-wow-duration', '1.5s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('site-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__flipInY');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('site-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__animated');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer src="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/wow_init.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false});</script></body></html>